var je=Object.defineProperty;var ye=(s,i,a)=>i in s?je(s,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[i]=a;var te=(s,i,a)=>(ye(s,typeof i!="symbol"?i+"":i,a),a);import{r as c,u as ve,b as J}from"./react-vendor-7e64a64e.js";import{A as we}from"./components-ea165bfd.js";import{f as K,p as Ne}from"./utils-f5112557.js";import{R as Se,L as ke,C as Ce,X as Ae,Y as Ie,T as Pe,a as _e,b as Re}from"./chart-vendor-2e7fb795.js";import{S as Ee,C as Te,L as Le,A as Fe}from"./ui-vendor-2ef6b736.js";var ce={exports:{}},B={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De=c,$e=Symbol.for("react.element"),Me=Symbol.for("react.fragment"),Oe=Object.prototype.hasOwnProperty,We=De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ze={key:!0,ref:!0,__self:!0,__source:!0};function de(s,i,a){var n,t={},l=null,r=null;a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),i.ref!==void 0&&(r=i.ref);for(n in i)Oe.call(i,n)&&!ze.hasOwnProperty(n)&&(t[n]=i[n]);if(s&&s.defaultProps)for(n in i=s.defaultProps,i)t[n]===void 0&&(t[n]=i[n]);return{$$typeof:$e,type:s,key:l,ref:r,props:t,_owner:We.current}}B.Fragment=Me;B.jsx=de;B.jsxs=de;ce.exports=B;var e=ce.exports;function Ue(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}async function Ge(s){const i=new TextEncoder().encode(s),a=await crypto.subtle.digest("SHA-256",i);return Ue(new Uint8Array(a))}function Be(s=64){const i=new Uint8Array(s);crypto.getRandomValues(i);const a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~";let n="";for(let t=0;t<i.length;t++)n+=a[i[t]%a.length];return n}async function Os(){window.location.href="/login"}async function qe(){const s="us-east-1csm5oddde.auth.us-east-1.amazoncognito.com",i="4oc76981p9te4uegc85r0mnjg7",a="openid email phone".split(/\s+/).join("+"),n="https://d1zhi8uis2cnfs.cloudfront.net/auth/callback",t=Be(64),l=await Ge(t);sessionStorage.setItem("pkce_verifier",t);const r=`https://${s}/login?client_id=${encodeURIComponent(i)}&response_type=code&scope=${a}&redirect_uri=${encodeURIComponent(n)}&code_challenge=${encodeURIComponent(l)}&code_challenge_method=S256`;window.location.href=r}function Ws(){const s="us-east-1csm5oddde.auth.us-east-1.amazoncognito.com",i="4oc76981p9te4uegc85r0mnjg7",a="https://d1zhi8uis2cnfs.cloudfront.net/";localStorage.removeItem("id_token"),localStorage.removeItem("access_token");const n=`https://${s}/logout?client_id=${encodeURIComponent(i)}&logout_uri=${encodeURIComponent(a)}`;window.location.href=n}function W(){return localStorage.getItem("id_token")||localStorage.getItem("access_token")||""}function q(){const s=W();if(!s)return!1;try{const i=JSON.parse(atob(s.split(".")[1]));return Date.now()/1e3<i.exp}catch{return!1}}function He(){const s=W();if(!s)return{};try{const i=JSON.parse(atob(s.split(".")[1]));return{name:i.name||i.given_name||i.preferred_username,email:i.email,account:i["cognito:username"]||i.sub}}catch{return{}}}function I({children:s,className:i=""}){return e.jsx("div",{className:`jc-card ${i}`,children:s})}function P({children:s,onClick:i,disabled:a=!1,className:n="",type:t="button",variant:l="default"}){const r=l==="outline"?"jc-btn-outline":"jc-btn";return e.jsx("button",{type:t,onClick:i,disabled:a,className:`${r} ${n} ${a?"opacity-50 cursor-not-allowed":""}`,children:s})}function zs(s){try{const i=s instanceof Date?s:new Date(s);return isNaN(i.getTime())?"Invalid date":i.toLocaleTimeString()}catch(i){return console.warn("Error formatting timestamp:",i),"Invalid date"}}function Ve(s){try{const i=s instanceof Date?s:new Date(s);return isNaN(i.getTime())?"Invalid date":i.toLocaleString()}catch(i){return console.warn("Error formatting date/time:",i),"Invalid date"}}function Je({text:s,speed:i=22,className:a=""}){const[n,t]=c.useState("");return c.useEffect(()=>{let l=0;const r=setInterval(()=>{l++,t(s.slice(0,l)),l>=s.length&&clearInterval(r)},i);return()=>clearInterval(r)},[s,i]),e.jsxs("span",{className:a,children:[n,e.jsx("span",{className:"caret","aria-hidden":!0})]})}function Ke({children:s,delay:i=0}){const a=c.useRef(null);return c.useEffect(()=>{const n=a.current,t=setTimeout(()=>n.classList.add("show"),i);return()=>clearTimeout(t)},[i]),e.jsx("div",{ref:a,className:"reveal",children:s})}class me extends c.Component{constructor(){super(...arguments);te(this,"state",{hasError:!1})}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,n){console.error("ErrorBoundary caught an error:",a,n)}render(){var a;return this.state.hasError?this.props.fallback||e.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:[e.jsx("h3",{className:"text-red-300 font-medium mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-red-200 text-sm",children:((a=this.state.error)==null?void 0:a.message)||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:void 0}),className:"mt-2 px-3 py-1 bg-red-500/20 text-red-300 rounded text-sm hover:bg-red-500/30",children:"Try again"})]}):this.props.children}}function Ye(){const[s,i]=c.useState({mtdSpend:null,complianceScore:null,securityIssues:null,loading:!0,error:null});return c.useEffect(()=>{(async()=>{var n;try{i(h=>({...h,loading:!0,error:null}));const t=W();if(!t||!q()){console.log("Home: Not authenticated, skipping data fetch"),i(h=>({...h,loading:!1,error:"not_authenticated"}));return}const l="https://4z2t2pj4r4.execute-api.us-east-1.amazonaws.com/metrics",r={}.VITE_GUARDRAILS_API;console.log("Home: Fetching summary data from:",{metricsApi:l,guardrailsApi:r});const x=[];l&&x.push(fetch(`${l}/summary`,{headers:{Authorization:`Bearer ${t}`}}).then(async h=>{if(console.log("Home: Metrics API response:",h.status,h.statusText),h.ok){const v=await h.json();return console.log("Home: Metrics data:",v),v}return null}).catch(h=>(console.error("Home: Metrics API error:",h),null))),r?x.push(fetch(`${r}/summary?framework=CIS`,{headers:{Authorization:`Bearer ${t}`}}).then(async h=>{if(console.log("Home: Guardrails API response:",h.status,h.statusText),h.ok){const v=await h.json();return console.log("Home: Guardrails data:",v),v}return null}).catch(h=>(console.error("Home: Guardrails API error:",h),null))):(console.log("Home: No guardrails API configured"),x.push(Promise.resolve(null)));const[m,o]=await Promise.all(x),d={mtdSpend:((n=m==null?void 0:m.cards)==null?void 0:n.mtdSpendUSD)||null,complianceScore:(o==null?void 0:o.score)||null,securityIssues:m!=null&&m.cards?m.cards.guardDutyFindings7d+m.cards.publicBuckets+m.cards.openSgRules:null,loading:!1,error:null};console.log("Home: Final summary data:",d),i(d)}catch(t){console.error("Home: Error fetching summary data:",t),i(l=>({...l,loading:!1,error:"Failed to load data"}))}})()},[]),s}function Us(){const s=ve(),i=He(),a=Ye();c.useEffect(()=>{q()||s("/login")},[s]);const n=r=>r==null?"—":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),t=r=>r===null?"text-jc-dim":r>=90?"text-green-400":r>=70?"text-amber-400":"text-red-400",l=r=>r===null?"—":r>=90?"Excellent":r>=70?"Good":"Needs Attention";return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"text-2xl font-semibold text-white",children:i.name?`Welcome back, ${i.name}!`:"Welcome to JohnnyCloud!"})}),a.error&&a.error!=="not_authenticated"&&e.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsxs("p",{className:"text-red-300 text-sm",children:["Error loading summary data: ",a.error]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-2xl border bg-white/5 p-4 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>s("/metrics"),role:"button",tabIndex:0,onKeyDown:r=>r.key==="Enter"&&s("/metrics"),"aria-label":"View detailed metrics",children:[e.jsx("div",{className:"text-sm opacity-70 mb-1",children:"Month-to-Date Spend"}),e.jsx("div",{className:"text-2xl font-semibold text-white",children:a.loading?e.jsx("div",{className:"h-8 bg-white/10 rounded animate-pulse"}):n(a.mtdSpend)}),e.jsx("div",{className:"text-xs opacity-70 mt-1",children:"Click to view details"})]}),e.jsxs("div",{className:"rounded-2xl border bg-white/5 p-4 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>s("/guardrails"),role:"button",tabIndex:0,onKeyDown:r=>r.key==="Enter"&&s("/guardrails"),"aria-label":"View compliance details",children:[e.jsx("div",{className:"text-sm opacity-70 mb-1",children:"Compliance Score"}),e.jsx("div",{className:`text-2xl font-semibold ${t(a.complianceScore)}`,children:a.loading?e.jsx("div",{className:"h-8 bg-white/10 rounded animate-pulse"}):a.complianceScore?`${a.complianceScore}%`:"—"}),e.jsx("div",{className:"text-xs opacity-70 mt-1",children:a.loading?"":l(a.complianceScore)})]}),e.jsxs("div",{className:"rounded-2xl border bg-white/5 p-4 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>s("/metrics"),role:"button",tabIndex:0,onKeyDown:r=>r.key==="Enter"&&s("/metrics"),"aria-label":"View security issues",children:[e.jsx("div",{className:"text-sm opacity-70 mb-1",children:"Open Security Issues"}),e.jsx("div",{className:"text-2xl font-semibold text-white",children:a.loading?e.jsx("div",{className:"h-8 bg-white/10 rounded animate-pulse"}):a.securityIssues??"—"}),e.jsx("div",{className:"text-xs opacity-70 mt-1",children:"GuardDuty + Public Resources"})]})]}),e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("h2",{className:"text-[clamp(24px,3vw,40px)] font-semibold text-white text-glow",children:"Your AWS Assistant"}),e.jsx(Je,{className:"mt-2 block max-w-3xl text-white/70",text:"Get optimization insights, security Guardrails with auto-remediation, and a clear business case for the cloud in one place."}),e.jsxs("div",{className:"mt-4 flex items-center gap-3 justify-center",children:[e.jsx("a",{href:"/metrics",className:"px-4 py-2 rounded border hover:bg-white/5",children:"View Metrics"}),e.jsx("a",{href:"/guardrails",className:"px-4 py-2 rounded border hover:bg-white/5",children:"Open Guardrails"}),e.jsx("a",{href:"/why-aws",className:"px-4 py-2 rounded bg-black text-white",children:"Why AWS"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl font-semibold",children:"Meet Johnny-5"}),e.jsxs("p",{className:"mt-2 opacity-80 max-w-xl",children:["Your intelligent AWS assistant. Ask questions about your cloud, get cost recommendations, see compliance status, and trigger safe auto-remediations—all in one chat. Enable ",e.jsx("span",{className:"relative after:absolute after:left-0 after:right-0 after:-bottom-0.5 after:h-px after:bg-gradient-to-r after:from-transparent after:via-white/60 after:to-transparent font-medium",children:"Speak reply"})," for voice."]}),e.jsx("ul",{className:"mt-4 space-y-2 text-sm",children:["Real-time AWS data analysis (Cost Explorer, Security Hub, GuardDuty)","Cost optimization & estimated savings (rightsizing, idle, schedules)","Compliance Guardrails (CIS/NIST/PCI) with one-click auto-remediation","Security posture insights & Change-Impact Timeline",'Voice replies via Amazon Polly (toggle "Speak reply")'].map((r,x)=>e.jsx(Ke,{delay:x*120,children:e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 h-2 w-2 rounded-full bg-emerald-400"}),e.jsx("span",{className:"text-white/80",children:r})]})},r))})]}),e.jsx(me,{children:e.jsx(we,{})})]})]})}const Ze="modulepreload",Qe=function(s){return"/"+s},ae={},E=function(i,a,n){if(!a||a.length===0)return i();const t=document.getElementsByTagName("link");return Promise.all(a.map(l=>{if(l=Qe(l),l in ae)return;ae[l]=!0;const r=l.endsWith(".css"),x=r?'[rel="stylesheet"]':"";if(!!n)for(let d=t.length-1;d>=0;d--){const h=t[d];if(h.href===l&&(!r||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${x}`))return;const o=document.createElement("link");if(o.rel=r?"stylesheet":Ze,r||(o.as="script",o.crossOrigin=""),o.href=l,document.head.appendChild(o),r)return new Promise((d,h)=>{o.addEventListener("load",d),o.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>i()).catch(l=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=l,window.dispatchEvent(r),!r.defaultPrevented)throw l})};function Xe({children:s,className:i="",variant:a="default"}){return e.jsx("div",{className:`min-h-screen py-8 ${i}`,children:e.jsx("div",{className:"max-w-6xl mx-auto px-4",children:s})})}function U({children:s,className:i=""}){return e.jsx("h1",{className:`jc-heading ${i}`,children:s})}function O({className:s=""}){return e.jsx("div",{className:`animate-pulse rounded-md bg-white/5 ${s}`})}const es=c.lazy(()=>E(()=>import("./charts-dd6f2768.js").then(s=>s.S),["assets/charts-dd6f2768.js","assets/utils-f5112557.js","assets/chart-vendor-2e7fb795.js","assets/react-vendor-7e64a64e.js"])),ss=c.lazy(()=>E(()=>import("./charts-dd6f2768.js").then(s=>s.a),["assets/charts-dd6f2768.js","assets/utils-f5112557.js","assets/chart-vendor-2e7fb795.js","assets/react-vendor-7e64a64e.js"])),ts=c.lazy(()=>E(()=>import("./SavingsProgressTracker-47d4b35f.js"),["assets/SavingsProgressTracker-47d4b35f.js","assets/utils-f5112557.js","assets/react-vendor-7e64a64e.js","assets/components-ea165bfd.js","assets/chart-vendor-2e7fb795.js","assets/ui-vendor-2ef6b736.js"])),as=c.lazy(()=>E(()=>import("./AnomaliesList-227b6840.js"),["assets/AnomaliesList-227b6840.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js","assets/components-ea165bfd.js","assets/chart-vendor-2e7fb795.js","assets/ui-vendor-2ef6b736.js"])),is=c.lazy(()=>E(()=>import("./SecurityFindingsList-20e722b2.js"),["assets/SecurityFindingsList-20e722b2.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js","assets/components-ea165bfd.js","assets/chart-vendor-2e7fb795.js","assets/ui-vendor-2ef6b736.js"]));function Gs(){var v;const[s,i]=c.useState(null),[a,n]=c.useState(!0),[t,l]=c.useState(null),[r,x]=c.useState("7d"),[m,o]=c.useState("both"),d=async()=>{var g,k,_,R;try{n(!0),l(null);const C=W();if(!C||!q()){l("not_authenticated");return}const T="https://4z2t2pj4r4.execute-api.us-east-1.amazonaws.com/metrics";console.log("Fetching metrics from:",T),console.log("Time range:",r,"Data source:",m);const S=await fetch(T,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`,Accept:"application/json"},body:JSON.stringify({timeRange:r,dataSource:m})});if(console.log("Response status:",S.status,S.statusText),!S.ok){let b=`HTTP ${S.status}: ${S.statusText}`;try{const f=await S.json();b=f.error||f.message||b}catch{}console.error("API Error:",b),l(b);return}const y=await S.json();if(console.log("Received data:",y),console.log("Anomalies structure:",y.anomalies),console.log("SecurityFindings structure:",y.securityFindings),!y||typeof y!="object")throw new Error("Invalid data format received from API");const p={cards:y.cards||{mtdSpendUSD:0,forecastUSD:0,anomalies30d:0,guardDutyFindings7d:0,secHubFailedControls7d:0,iamUsersWithoutMFA:0,iamKeysOver90d:0,publicBuckets:0,openSgRules:0},charts:y.charts||{dailySpend7d:[],topServicesMTD:[],securityFindings7d:[]},anomalies:Array.isArray(y.anomalies)?y.anomalies:Array.isArray((g=y.anomalies)==null?void 0:g.items)?y.anomalies.items:Array.isArray((k=y.anomalies)==null?void 0:k.data)?y.anomalies.data:[],securityFindings:Array.isArray(y.securityFindings)?y.securityFindings:Array.isArray((_=y.securityFindings)==null?void 0:_.items)?y.securityFindings.items:Array.isArray((R=y.securityFindings)==null?void 0:R.data)?y.securityFindings.data:[],savings:y.savings||{totalSavings:0,optimizationCount:0,targetSavings:0,topActions:[]},meta:y.meta||{costExplorerReady:!1,securityHubEnabled:!1,guardDutyEnabled:!1}};console.log("Validated anomalies:",p.anomalies),console.log("Validated securityFindings:",p.securityFindings),i(p)}catch(C){console.error("Fetch error:",C),l(C instanceof Error?C.message:"Failed to fetch metrics")}finally{n(!1)}};c.useEffect(()=>{d()},[r,m]);const h=()=>{d()};return e.jsxs(Xe,{variant:"none",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[e.jsx(U,{className:"text-3xl sm:text-4xl",children:"Metrics"}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsxs("select",{value:r,onChange:g=>x(g.target.value),className:"px-3 py-1 bg-white/10 border border-white/20 rounded text-sm text-white",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"mtd",children:"Month to date"}),e.jsx("option",{value:"qtd",children:"Quarter to date"})]}),e.jsx(P,{onClick:h,children:"Refresh"})]})]}),s&&!s.meta.costExplorerReady&&e.jsx("div",{className:"mb-4 p-4 bg-yellow-500/20 border border-yellow-500/30 rounded-lg",children:e.jsx("div",{className:"text-yellow-200 text-sm",children:"Cost Explorer is still backfilling. Values may be zero for ~24h."})}),s&&!s.meta.securityHubEnabled&&e.jsx("div",{className:"mb-4 p-4 bg-orange-500/20 border border-orange-500/30 rounded-lg",children:e.jsx("div",{className:"text-orange-200 text-sm",children:"Security Hub is disabled. Enable it in us-east-1 to see failed controls."})}),s&&!s.meta.guardDutyEnabled&&e.jsx("div",{className:"mb-4 p-4 bg-red-500/20 border border-red-500/30 rounded-lg",children:e.jsx("div",{className:"text-red-200 text-sm",children:"Enable GuardDuty in us-east-1."})}),t==="not_authenticated"&&e.jsx("div",{className:"mb-6 p-4 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:e.jsx("p",{className:"text-amber-300 text-sm",children:"Please log in to view your metrics."})}),t&&t!=="not_authenticated"&&e.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:[e.jsxs("p",{className:"text-red-300 text-sm",children:["Error loading metrics: ",t]}),e.jsx("button",{onClick:h,className:"mt-2 px-3 py-1 bg-red-500/20 text-red-300 rounded text-sm hover:bg-red-500/30",children:"Retry"})]}),a&&e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsx(O,{className:"h-5 w-40"}),e.jsx(O,{className:"mt-2 h-8 w-24"}),e.jsx(O,{className:"mt-4 h-4 w-32"})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur md:col-span-2",children:[e.jsx(O,{className:"h-5 w-32"}),e.jsx(O,{className:"mt-4 h-48 w-full"})]})]}),t&&e.jsx("div",{className:"mb-4 p-4 bg-red-500/20 border border-red-500/30 rounded-lg",children:e.jsxs("div",{className:"text-red-200 text-sm",children:["Error: ",t]})}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Month-to-date Spend"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"USD"})]}),e.jsx("div",{className:"text-3xl font-semibold text-slate-100",children:K(s.cards.mtdSpendUSD)}),e.jsx("div",{className:"mt-4 jc-glow-line"}),e.jsxs("p",{className:"mt-3 text-xs text-slate-400",children:["Forecast: ",e.jsx("span",{className:"text-slate-200",children:K(s.cards.forecastUSD)})]})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur md:col-span-2",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Spend Trend"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"USD"})]}),e.jsx(me,{children:e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-white/5 rounded animate-pulse"}),children:e.jsx(es,{data:((v=s.charts)==null?void 0:v.dailySpend7d)||[],loading:a,timeRange:r})})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-white/5 rounded animate-pulse"}),children:e.jsx(ts,{totalSavings:s.savings.totalSavings,optimizationCount:s.savings.optimizationCount,targetSavings:s.savings.targetSavings,topActions:s.savings.topActions,loading:a})}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur md:col-span-2",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Security Findings Trend"}),e.jsx("div",{className:"flex gap-1",children:["guardduty","securityhub","both"].map(g=>e.jsx("button",{onClick:()=>o(g),className:`px-2 py-1 text-xs rounded transition-colors ${m===g?"bg-cyan-500/20 text-cyan-300 border border-cyan-500/30":"bg-white/5 text-slate-400 hover:bg-white/10 border border-white/10"}`,children:g==="both"?"Both":g==="guardduty"?"GuardDuty":"Security Hub"},g))})]}),e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-white/5 rounded animate-pulse"}),children:e.jsx(ss,{data:s.charts.securityFindings7d,loading:a,dataSource:m})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Active Anomalies"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"Count"})]}),e.jsx("div",{className:"text-2xl font-bold text-cyan-300",children:s.cards.anomalies30d}),e.jsx("div",{className:"mt-4 jc-glow-line"}),e.jsx("p",{className:"mt-3 text-xs text-slate-400",children:"anomalies detected"})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"GuardDuty Findings"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"Count"})]}),e.jsx("div",{className:"text-2xl font-bold text-cyan-300",children:s.cards.guardDutyFindings7d}),e.jsx("div",{className:"mt-4 jc-glow-line"}),e.jsx("p",{className:"mt-3 text-xs text-slate-400",children:"findings detected"})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Security Hub Controls"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"Count"})]}),e.jsx("div",{className:"text-2xl font-bold text-cyan-300",children:s.cards.secHubFailedControls7d}),e.jsx("div",{className:"mt-4 jc-glow-line"}),e.jsx("p",{className:"mt-3 text-xs text-slate-400",children:"failed controls"})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Top Services (MTD)"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"USD"})]}),e.jsxs("ul",{className:"text-sm space-y-2",children:[s.charts.topServicesMTD.slice(0,3).map(g=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-200 truncate",children:g.service}),e.jsx("span",{className:"text-slate-400",children:K(g.usd)})]},g.service)),s.charts.topServicesMTD.length===0&&e.jsx("li",{className:"text-slate-400",children:"no data"})]}),e.jsx("div",{className:"mt-4 jc-glow-line"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-96 bg-white/5 rounded animate-pulse"}),children:e.jsx(as,{anomalies:s.anomalies,loading:a})}),e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-96 bg-white/5 rounded animate-pulse"}),children:e.jsx(is,{findings:s.securityFindings,loading:a})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"IAM Hygiene"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"Issues"})]}),e.jsxs("div",{className:"text-sm mb-2",children:["Users without MFA: ",e.jsx("span",{className:"text-cyan-300 font-semibold",children:s.cards.iamUsersWithoutMFA})]}),e.jsxs("div",{className:"text-sm",children:["Keys > 90 days: ",e.jsx("span",{className:"text-cyan-300 font-semibold",children:s.cards.iamKeysOver90d})]}),e.jsx("div",{className:"mt-4 jc-glow-line"})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Network Exposure"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"Issues"})]}),e.jsxs("div",{className:"text-sm mb-2",children:["Public S3 buckets: ",e.jsx("span",{className:"text-cyan-300 font-semibold",children:s.cards.publicBuckets})]}),e.jsxs("div",{className:"text-sm",children:["Open SG rules: ",e.jsx("span",{className:"text-cyan-300 font-semibold",children:s.cards.openSgRules})]}),e.jsx("div",{className:"mt-4 jc-glow-line"})]})]})]})]})}const D={}.VITE_GUARDRAILS_API,ie={framework:"CIS",score:74,totals:{pass:18,fail:6,warn:3},controls:[{id:"CIS-1.1",title:"S3 Block Public Access",status:"FAIL",pass:0,fail:3,warn:0,resources:[{arn:"arn:aws:s3:::demo-bucket",service:"s3",region:"us-east-1",note:"Public ACL",findingId:"arn:aws:securityhub:us-east-1:123456789012:finding/12345678-1234-1234-1234-123456789012"},{arn:"arn:aws:s3:::public-data-bucket",service:"s3",region:"us-west-2",note:"Public read policy",findingId:"arn:aws:securityhub:us-west-2:123456789012:finding/87654321-4321-4321-4321-210987654321"},{arn:"arn:aws:s3:::test-bucket",service:"s3",region:"eu-west-1",note:"Bucket policy allows public access"}]},{id:"CIS-1.2",title:"CloudTrail enabled",status:"PASS",pass:1,fail:0,warn:0,resources:[{arn:"arn:aws:cloudtrail:us-east-1:123456789012:trail/main-trail",service:"cloudtrail",region:"us-east-1"}]},{id:"CIS-2.1",title:"IAM Root User Access Keys",status:"WARN",pass:0,fail:0,warn:1,resources:[{arn:"arn:aws:iam::123456789012:root",service:"iam",region:"global",note:"Root access key exists but not recently used"}]},{id:"CIS-2.2",title:"MFA Enabled for Root User",status:"PASS",pass:1,fail:0,warn:0,resources:[]},{id:"CIS-3.1",title:"CloudTrail Log File Validation",status:"FAIL",pass:0,fail:1,warn:0,resources:[{arn:"arn:aws:cloudtrail:us-east-1:123456789012:trail/main-trail",service:"cloudtrail",region:"us-east-1",note:"Log file validation disabled"}]},{id:"CIS-3.2",title:"CloudTrail Multi-Region",status:"PASS",pass:1,fail:0,warn:0,resources:[]},{id:"CIS-4.1",title:"Security Groups - SSH Access",status:"FAIL",pass:0,fail:2,warn:1,resources:[{arn:"arn:aws:ec2:us-east-1:123456789012:security-group/sg-12345678",service:"ec2",region:"us-east-1",note:"SSH open to 0.0.0.0/0"},{arn:"arn:aws:ec2:us-west-2:123456789012:security-group/sg-87654321",service:"ec2",region:"us-west-2",note:"SSH open to 0.0.0.0/0"}]},{id:"CIS-4.2",title:"Security Groups - RDP Access",status:"PASS",pass:3,fail:0,warn:0,resources:[]}]},re={framework:"NIST",score:68,totals:{pass:12,fail:8,warn:4},controls:[{id:"NIST-AC-1",title:"Access Control Policy and Procedures",status:"PASS",pass:1,fail:0,warn:0,resources:[]},{id:"NIST-AC-2",title:"Account Management",status:"FAIL",pass:0,fail:2,warn:1,resources:[{arn:"arn:aws:iam::123456789012:user/admin-user",service:"iam",region:"global",note:"No MFA enabled"}]}]},ne={framework:"PCI",score:82,totals:{pass:15,fail:3,warn:2},controls:[{id:"PCI-1.1",title:"Firewall Configuration",status:"PASS",pass:1,fail:0,warn:0,resources:[]},{id:"PCI-2.1",title:"Default Password Policy",status:"FAIL",pass:0,fail:1,warn:0,resources:[{arn:"arn:aws:iam::123456789012:account",service:"iam",region:"global",note:"Weak password policy"}]}]};async function rs(s="CIS"){if(!D)switch(s){case"NIST":return Promise.resolve(re);case"PCI":return Promise.resolve(ne);default:return Promise.resolve(ie)}try{const i=await fetch(`${D}/summary?framework=${s}`);if(!i.ok)throw new Error(`summary ${i.status}`);return i.json()}catch(i){switch(console.error("Guardrails API error:",i),s){case"NIST":return re;case"PCI":return ne;default:return ie}}}async function ns(s,i,a=!0){if(!D)return{actionId:crypto.randomUUID(),status:a?"SIMULATED":"QUEUED",message:a?"Dry run simulation - no actual changes made":"Mock remediation queued"};try{const n=await fetch(`${D}/remediate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({controlId:s,resourceArn:i,dryRun:a})});if(!n.ok)throw new Error(`remediate ${n.status}`);return n.json()}catch(n){return console.error("Remediation API error:",n),{actionId:crypto.randomUUID(),status:"ERROR",message:`Failed to queue remediation: ${n instanceof Error?n.message:"Unknown error"}`}}}async function ls(s){if(!D)return{controlId:s,generatedAt:new Date().toISOString(),items:[{type:"scan_result",timestamp:new Date(Date.now()-864e5).toISOString(),details:`Compliance scan for ${s} completed`,findings:["Resource configuration checked","Security policies reviewed","Access patterns analyzed"]},{type:"policy_check",timestamp:new Date(Date.now()-1728e5).toISOString(),details:`Policy compliance check for ${s}`,result:"Non-compliant",recommendations:["Update resource configuration","Apply security best practices","Review access permissions"]}]};try{const i=await fetch(`${D}/evidence?control=${encodeURIComponent(s)}`);if(!i.ok)throw new Error(`evidence ${i.status}`);return i.json()}catch(i){return console.error("Evidence API error:",i),{controlId:s,generatedAt:new Date().toISOString(),items:[]}}}function Y(s,i){const a=s.toLowerCase(),n=i.toLowerCase();return a.includes("1.1")||a.includes("1.2")||a.includes("2.1")||a.includes("2.2")||a.includes("3.1")||a.includes("3.2")||a.includes("4.1")||a.includes("4.2")||n.includes("public")||n.includes("root")||n.includes("mfa")||n.includes("encryption")?"High":a.includes("5.")||a.includes("6.")||a.includes("7.")||a.includes("8.")||n.includes("logging")||n.includes("monitoring")||n.includes("network")?"Medium":"Low"}function os(s){return{High:{level:"High",color:"text-red-400",bgColor:"bg-red-500/20",borderColor:"border-red-500/30",icon:"🔴",description:"Critical security risk requiring immediate attention"},Medium:{level:"Medium",color:"text-amber-400",bgColor:"bg-amber-500/20",borderColor:"border-amber-500/30",icon:"🟡",description:"Moderate security risk that should be addressed soon"},Low:{level:"Low",color:"text-green-400",bgColor:"bg-green-500/20",borderColor:"border-green-500/30",icon:"🟢",description:"Low security risk with minimal immediate impact"},Informational:{level:"Informational",color:"text-blue-400",bgColor:"bg-blue-500/20",borderColor:"border-blue-500/30",icon:"ℹ️",description:"Informational finding for awareness"}}[s]}function cs(s,i,a=1){return{High:3,Medium:2,Low:1,Informational:.5}[s]*i*a}function ds(s,i,a){const n=i.toLowerCase();return a.some(l=>{var r,x;return((r=l.note)==null?void 0:r.toLowerCase().includes("public"))||((x=l.note)==null?void 0:x.toLowerCase().includes("0.0.0.0/0"))})||n.includes("public")?3:n.includes("security group")||n.includes("access")||n.includes("network")?2:1}function G({severity:s,className:i="",showIcon:a=!0,tooltip:n=!0}){const t=os(s),l=e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium border ${t.bgColor} ${t.borderColor} ${t.color} ${i}`,role:"img","aria-label":`${s} severity`,children:[a&&e.jsx("span",{"aria-hidden":"true",children:t.icon}),e.jsx("span",{children:t.level})]});return n?e.jsxs("div",{className:"group relative inline-block",children:[l,e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-black/90 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:[t.description,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-black/90"})]})]}):l}function ms({isOpen:s,onClose:i,onExecute:a,controls:n,title:t,description:l}){const[r,x]=c.useState(new Set),[m,o]=c.useState(!1),[d,h]=c.useState(!1);if(!s)return null;const v=n.reduce((p,b)=>p+b.resources.length,0),g=r.size,k=p=>{const b=new Set(r);b.has(p)?b.delete(p):b.add(p),x(b)},_=()=>{if(r.size===v)x(new Set);else{const p=n.flatMap(b=>b.resources.map(f=>f.arn));x(new Set(p))}},R=async()=>{if(g!==0){h(!0);try{await a(Array.from(r),m),i()}catch(p){console.error("Bulk remediation failed:",p),alert(`Failed to execute bulk remediation: ${p instanceof Error?p.message:"Unknown error"}`)}finally{h(!1)}}},C=()=>{const p=new Set(n.flatMap(f=>f.resources.map(H=>H.service))),b=[];return p.has("s3")&&b.push("s3:PutBucketPublicAccessBlock","s3:PutBucketPolicy","s3:PutBucketAcl"),p.has("ec2")&&b.push("ec2:AuthorizeSecurityGroupIngress","ec2:RevokeSecurityGroupIngress","ec2:ModifySecurityGroupRules"),p.has("cloudtrail")&&b.push("cloudtrail:UpdateTrail","cloudtrail:PutEventSelectors"),p.has("iam")&&b.push("iam:UpdateAccountPasswordPolicy","iam:CreateVirtualMFADevice","iam:EnableMFADevice"),b},T=()=>{const p=[],b=[];return n.forEach(f=>{(f.id.includes("1.1")||f.title.toLowerCase().includes("s3 public access"))&&(p.push("S3 buckets may become temporarily inaccessible during remediation"),b.push("Disable S3 Block Public Access via AWS Console or CLI")),(f.id.includes("4.1")||f.title.toLowerCase().includes("security group"))&&(p.push("Network access may be restricted, potentially blocking legitimate traffic"),b.push("Restore original security group rules from backup or AWS Config")),(f.id.includes("3.1")||f.title.toLowerCase().includes("cloudtrail"))&&(p.push("Logging configuration changes may affect compliance monitoring"),b.push("Revert CloudTrail settings to previous configuration"))}),{risks:[...new Set(p)],rollbacks:[...new Set(b)]}},{risks:S,rollbacks:y}=T();return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-black/90 border border-white/20 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:t}),e.jsx("p",{className:"text-jc-dim text-sm",children:l})]}),e.jsx(P,{onClick:i,className:"px-3 py-1",children:"Close"})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs(I,{className:"p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Remediation Summary"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-jc-dim",children:"Controls"}),e.jsx("div",{className:"font-medium",children:n.length})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-jc-dim",children:"Total Resources"}),e.jsx("div",{className:"font-medium",children:v})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-jc-dim",children:"Selected"}),e.jsx("div",{className:"font-medium text-cyan-300",children:g})]})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold",children:"Resources to Remediate"}),e.jsx(P,{onClick:_,className:"px-3 py-1 text-xs",variant:"outline",children:r.size===v?"Deselect All":"Select All"})]}),n.map(p=>e.jsxs(I,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(G,{severity:p.severity}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm",children:[p.id," — ",p.title]}),e.jsxs("div",{className:"text-xs text-jc-dim",children:[p.resources.length," resource",p.resources.length!==1?"s":""]})]})]}),e.jsx("div",{className:"space-y-2",children:p.resources.map((b,f)=>e.jsxs("label",{className:"flex items-center gap-3 p-2 bg-white/5 rounded border border-white/10 hover:bg-white/10 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.has(b.arn),onChange:()=>k(b.arn),className:"rounded border-white/20 bg-transparent text-cyan-500 focus:ring-cyan-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-mono text-xs break-all",children:b.arn}),e.jsxs("div",{className:"text-xs text-jc-dim",children:[b.service.toUpperCase()," • ",b.region,b.note&&` • ${b.note}`]})]})]},f))})]},p.id))]}),e.jsxs(I,{className:"p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Required Permissions"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:C().map((p,b)=>e.jsx("div",{className:"font-mono text-xs bg-white/5 p-2 rounded border border-white/10",children:p},b))})]}),e.jsxs(I,{className:"p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Risks & Rollback"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-400 mb-2",children:"Potential Risks"}),e.jsx("ul",{className:"text-xs text-jc-dim space-y-1",children:S.map((p,b)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400 mt-0.5",children:"•"}),p]},b))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-amber-400 mb-2",children:"Rollback Steps"}),e.jsx("ul",{className:"text-xs text-jc-dim space-y-1",children:y.map((p,b)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-amber-400 mt-0.5",children:"•"}),p]},b))})]})]})]}),e.jsx(I,{className:"p-4 mb-6",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:p=>o(p.target.checked),className:"rounded border-white/20 bg-transparent text-cyan-500 focus:ring-cyan-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Notify when remediation is complete"}),e.jsx("div",{className:"text-xs text-jc-dim",children:"Receive email/Slack notification when all selected resources have been remediated"})]})]})})]}),e.jsxs("div",{className:"p-6 border-t border-white/20 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-jc-dim",children:g>0?`${g} resource${g!==1?"s":""} selected`:"No resources selected"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(P,{onClick:i,variant:"outline",disabled:d,children:"Cancel"}),e.jsx(P,{onClick:R,disabled:g===0||d,className:"px-6",children:d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Executing..."]}):`Run Remediation (${g})`})]})]})]})})}function us({data:s,loading:i=!1}){if(i)return e.jsx("div",{className:"h-64 bg-white/5 rounded-lg animate-pulse flex items-center justify-center",children:e.jsx("span",{className:"text-white/50",children:"Loading compliance trend..."})});if(!s||s.length===0)return e.jsx("div",{className:"h-64 bg-white/5 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white/50",children:"No compliance data available"})});const a=({active:t,payload:l,label:r})=>{if(t&&l&&l.length){const x=l[0].payload;return e.jsxs("div",{className:"bg-black/80 border border-white/20 rounded-lg p-3 text-sm",children:[e.jsx("p",{className:"text-white/70 mb-1",children:r}),e.jsxs("p",{className:"text-white",children:["Score: ",e.jsxs("span",{className:"text-cyan-300",children:[x.score,"%"]})]}),e.jsxs("p",{className:"text-white",children:["Passed: ",e.jsx("span",{className:"text-green-400",children:x.passed})," / Failed: ",e.jsx("span",{className:"text-red-400",children:x.failed})]}),x.hasRemediation&&e.jsxs("p",{className:"text-white",children:["Remediation: ",e.jsx("span",{className:"text-amber-300",children:x.remediationType})]})]})}return null},n=t=>{const{payload:l}=t;return l.hasRemediation?e.jsx(Re,{...t,r:6,fill:"#f59e0b",stroke:"#f59e0b",strokeWidth:2}):null};return e.jsx("div",{className:"h-64",children:e.jsx(Se,{width:"100%",height:"100%",children:e.jsxs(ke,{data:s,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Ce,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(Ae,{dataKey:"date",stroke:"rgba(255,255,255,0.6)",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:t=>{const l=new Date(t);return`${l.getMonth()+1}/${l.getDate()}`}}),e.jsx(Ie,{stroke:"rgba(255,255,255,0.6)",fontSize:12,tickLine:!1,axisLine:!1,domain:[0,100],tickFormatter:t=>`${t}%`}),e.jsx(Pe,{content:e.jsx(a,{})}),e.jsx(_e,{type:"monotone",dataKey:"score",stroke:"#06b6d4",strokeWidth:3,dot:t=>e.jsx(n,{...t}),activeDot:{r:6,stroke:"#06b6d4",strokeWidth:2}})]})})})}function hs({controls:s,onFixControl:i,loading:a=!1}){if(a)return e.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-48 mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(t=>e.jsx("div",{className:"h-16 bg-white/10 rounded"},t))})]})});const n=s.filter(t=>t.status==="FAIL").map(t=>{let l="Medium";t.id.includes("1.1")||t.id.includes("1.2")||t.id.includes("2.1")||t.id.includes("2.2")||t.title.toLowerCase().includes("public")||t.title.toLowerCase().includes("root")||t.title.toLowerCase().includes("mfa")?l="High":t.id.includes("3.")||t.id.includes("4.")||t.title.toLowerCase().includes("logging")||t.title.toLowerCase().includes("monitoring")?l="Medium":l="Low";const r=ds(t.id,t.title,t.resources),x=cs(l,t.fail,r);return{...t,severity:l,priority:x,exposureWeight:r}}).sort((t,l)=>l.priority-t.priority).slice(0,3);return n.length===0?e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Compliance Checklist — Quick Wins"}),e.jsxs("div",{className:"text-center py-8 text-jc-dim",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🎉"}),e.jsx("div",{className:"text-sm",children:"All critical controls are passing!"}),e.jsx("div",{className:"text-xs mt-1",children:"Great job maintaining compliance."})]})]}):e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Compliance Checklist — Quick Wins"}),e.jsx("p",{className:"text-sm text-jc-dim mb-4",children:"Prioritized fixes to improve your compliance score quickly"}),e.jsx("div",{className:"space-y-3",children:n.map((t,l)=>e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-cyan-300",children:["#",l+1]}),e.jsx(G,{severity:t.severity})]}),e.jsx("button",{onClick:()=>i(t.id),className:"px-3 py-1 text-xs bg-cyan-500/20 text-cyan-300 hover:bg-cyan-500/30 rounded border border-cyan-500/30 transition-colors",children:"Fix now"})]}),e.jsxs("div",{className:"text-sm font-medium mb-1",children:[t.id," — ",t.title]}),e.jsxs("div",{className:"text-xs text-jc-dim mb-2",children:[t.fail," resource",t.fail!==1?"s":""," need",t.fail===1?"s":""," attention"]}),e.jsx("div",{className:"text-xs text-jc-dim",children:xs(t.id,t.title,t.fail,t.exposureWeight)})]},t.id))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:e.jsxs("div",{className:"text-xs text-jc-dim",children:["💡 ",e.jsx("strong",{children:"Tip:"})," Fixing these ",n.length," controls could improve your compliance score by up to"," ",Math.round(n.reduce((t,l)=>t+l.fail*2,0))," points."]})})]})}function xs(s,i,a,n){const t=i.toLowerCase();return s.includes("1.1")||t.includes("s3 public access")?"Public S3 buckets pose high security risk. Blocking public access is a quick, safe fix that prevents data breaches.":s.includes("2.1")||s.includes("2.2")||t.includes("root")?"Root user security is critical. Enabling MFA and removing access keys significantly reduces account compromise risk.":s.includes("4.1")||t.includes("security group")?"Open security groups expose services to the internet. Restricting access to specific IPs improves network security.":s.includes("3.1")||t.includes("cloudtrail")?"CloudTrail logging is essential for compliance. Enabling log validation ensures audit trail integrity.":t.includes("mfa")?"Multi-factor authentication prevents unauthorized access. This is a low-effort, high-impact security improvement.":t.includes("encryption")?"Encryption protects data at rest and in transit. Enabling encryption is a compliance requirement with minimal performance impact.":`This control affects ${a} resource${a!==1?"s":""} and has ${n===3?"high":n===2?"medium":"low"} exposure risk.`}function Bs(){const[s,i]=c.useState("CIS"),[a,n]=c.useState(null),[t,l]=c.useState(!1),[r,x]=c.useState(null),[m,o]=c.useState(null),[d,h]=c.useState(null),[v,g]=c.useState("30d"),[k,_]=c.useState(!1),[R,C]=c.useState([]),[T,S]=c.useState(""),[y,p]=c.useState(""),b="https://4z2t2pj4r4.execute-api.us-east-1.amazonaws.com/chat";c.useEffect(()=>{let u=!0;return l(!0),x(null),o(null),rs(s).then(w=>{if(u){n(w);const N=w.controls.find(j=>j.status==="FAIL");N&&o(N.id)}}).catch(w=>{console.error("Error loading guardrails data:",w),x(String(w))}).finally(()=>l(!1)),()=>{u=!1}},[s]);const f=c.useMemo(()=>(a==null?void 0:a.controls.find(u=>u.id===m))||null,[m,a]),H=u=>u>=80?"text-emerald-600":u>=60?"text-amber-600":"text-red-600",ue=u=>u>=80?"bg-emerald-50 border-emerald-200":u>=60?"bg-amber-50 border-amber-200":"bg-red-50 border-red-200",Q=u=>{switch(u){case"PASS":return"text-emerald-600 bg-emerald-50 border-emerald-200";case"FAIL":return"text-red-600 bg-red-50 border-red-200";case"WARN":return"text-amber-600 bg-amber-50 border-amber-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},he=c.useMemo(()=>{const u=v==="30d"?30:90,w=[],N=new Date;for(let j=u-1;j>=0;j--){const A=new Date(N);A.setDate(A.getDate()-j);const M=74,be=Math.sin(j/7)*5+Math.random()*3,ee=Math.max(0,Math.min(100,Math.round(M+be))),V=27,se=Math.round(ee/100*V),fe=V-se;w.push({date:A.toISOString().split("T")[0],score:ee,passed:se,failed:fe,total:V,hasRemediation:Math.random()>.9,remediationType:Math.random()>.5?"Bulk SG fix":"S3 access fix"})}return w},[v]);async function X(u){if(!f)return;h(u||"all");try{const N=await ns(f.id,u,!0),j=u?`Remediation queued for resource:
${u}

Action ID: ${N.actionId}
Status: ${N.status}`:`Remediation queued for control ${f.id}

Action ID: ${N.actionId}
Status: ${N.status}`;alert(j)}catch(N){console.error("Remediation error:",N),alert(`Failed to queue remediation: ${N instanceof Error?N.message:"Unknown error"}`)}finally{h(null)}}const $=u=>{if(!a)return;let w=[],N="",j="";switch(u){case"s3-public":w=a.controls.filter(A=>A.id.includes("1.1")||A.title.toLowerCase().includes("s3 public access")),N="Fix All S3 Public Access Issues",j="Remediate all S3 buckets with public access enabled";break;case"security-groups":w=a.controls.filter(A=>A.id.includes("4.1")||A.title.toLowerCase().includes("security group")),N="Fix All Security Group Issues",j="Restrict open security group rules to improve network security";break;case"cloudtrail":w=a.controls.filter(A=>A.id.includes("3.1")||A.title.toLowerCase().includes("cloudtrail")),N="Fix All CloudTrail Issues",j="Enable CloudTrail log validation and multi-region trails";break;case"selected":f&&(w=[f],N=`Fix All ${f.id} Issues`,j=`Remediate all resources for control ${f.id}`);break}if(w.length>0){const A=w.map(M=>({...M,severity:Y(M.id,M.title)}));C(A),S(N),p(j),_(!0)}},xe=async(u,w)=>{console.log("Executing bulk remediation:",{controls:R.map(N=>N.id),resources:u,notifyWhenDone:w}),await new Promise(N=>setTimeout(N,2e3)),alert(`Bulk remediation completed for ${u.length} resources${w?". You will be notified when done.":"."}`)},pe=u=>{(a==null?void 0:a.controls.find(N=>N.id===u))&&(o(u),$("selected"))};async function ge(){if(!a){alert("Chat API not configured or no data available");return}try{const u={message:`Given this ${a.framework} compliance snapshot (score: ${a.score}%), propose the top 3 remediations and a 1-week improvement plan. Focus on the most critical failing controls.`,mode:"bedrock",sessionId:`guardrails-${s}-${Date.now()}`,speak:!0,voice:"Joanna",guardrailsContext:{framework:a.framework,score:a.score,totals:a.totals,failingControls:a.controls.filter(j=>j.status==="FAIL").slice(0,10).map(j=>({id:j.id,title:j.title,failCount:j.fail,resources:j.resources.length}))}},w=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!w.ok)throw new Error(`Chat API error: ${w.status}`);const N=await w.text();alert(`JohnnyCloud Response:

${N}`)}catch(u){console.error("Chat API error:",u),alert(`Failed to get assistant response: ${u instanceof Error?u.message:"Unknown error"}`)}}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(I,{className:"p-6",children:[e.jsxs("header",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Compliance & Guardrails"}),e.jsx("p",{className:"text-jc-dim text-sm",children:"Monitor compliance across security frameworks and manage remediation actions"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-jc-dim",children:"Framework:"}),e.jsxs("select",{className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-jc-cyan",value:s,onChange:u=>i(u.target.value),disabled:t,children:[e.jsx("option",{value:"CIS",children:"CIS"}),e.jsx("option",{value:"NIST",children:"NIST"}),e.jsx("option",{value:"PCI",children:"PCI"})]})]}),e.jsxs(P,{onClick:ge,className:"px-4 py-2",disabled:!a,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Ask JohnnyCloud"]})]})]}),t&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-jc-cyan"}),e.jsx("span",{className:"ml-3 text-jc-dim",children:"Loading guardrails data..."})]}),r&&e.jsxs("div",{className:"p-4 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300 text-sm",children:["Error loading guardrails data: ",r]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs(I,{className:"p-6",children:[e.jsx("div",{className:"text-sm text-jc-dim mb-1",children:"Framework"}),e.jsx("div",{className:"text-xl font-semibold",children:a.framework})]}),e.jsxs(I,{className:`p-6 border-2 ${ue(a.score)}`,children:[e.jsx("div",{className:"text-sm text-jc-dim mb-1",children:"Compliance Score"}),e.jsxs("div",{className:`text-3xl font-bold ${H(a.score)}`,children:[a.score,"%"]})]}),e.jsxs(I,{className:"p-6",children:[e.jsx("div",{className:"text-sm text-jc-dim mb-1",children:"Controls Passed"}),e.jsx("div",{className:"text-2xl font-semibold text-emerald-600",children:a.totals.pass})]}),e.jsxs(I,{className:"p-6",children:[e.jsx("div",{className:"text-sm text-jc-dim mb-1",children:"Failed / Warnings"}),e.jsxs("div",{className:"text-xl",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:a.totals.fail}),e.jsx("span",{className:"text-jc-dim mx-1",children:"/"}),e.jsx("span",{className:"text-amber-600 font-semibold",children:a.totals.warn})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(I,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:["Compliance Trend (",a.framework,")"]}),e.jsx("div",{className:"flex gap-1",children:["30d","90d"].map(u=>e.jsx("button",{onClick:()=>g(u),className:`px-3 py-1 text-xs rounded transition-colors ${v===u?"bg-cyan-500/20 text-cyan-300 border border-cyan-500/30":"bg-white/5 text-slate-400 hover:bg-white/10 border border-white/10"}`,children:u},u))})]}),e.jsx(us,{data:he,loading:t,timeRange:v})]})}),e.jsx("div",{children:e.jsx(hs,{controls:a.controls,onFixControl:pe,loading:t})})]}),e.jsxs(I,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Bulk Remediation Actions"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs(P,{onClick:()=>$("s3-public"),className:"p-4 h-auto flex flex-col items-center gap-2",disabled:!a.controls.some(u=>u.id.includes("1.1")||u.title.toLowerCase().includes("s3 public access")),children:[e.jsx("div",{className:"text-2xl",children:"🪣"}),e.jsx("div",{className:"text-sm",children:"Fix S3 Public Access"}),e.jsx("div",{className:"text-xs opacity-70",children:"Block public access on all buckets"})]}),e.jsxs(P,{onClick:()=>$("security-groups"),className:"p-4 h-auto flex flex-col items-center gap-2",disabled:!a.controls.some(u=>u.id.includes("4.1")||u.title.toLowerCase().includes("security group")),children:[e.jsx("div",{className:"text-2xl",children:"🔒"}),e.jsx("div",{className:"text-sm",children:"Fix Security Groups"}),e.jsx("div",{className:"text-xs opacity-70",children:"Restrict open ingress rules"})]}),e.jsxs(P,{onClick:()=>$("cloudtrail"),className:"p-4 h-auto flex flex-col items-center gap-2",disabled:!a.controls.some(u=>u.id.includes("3.1")||u.title.toLowerCase().includes("cloudtrail")),children:[e.jsx("div",{className:"text-2xl",children:"📊"}),e.jsx("div",{className:"text-sm",children:"Fix CloudTrail"}),e.jsx("div",{className:"text-xs opacity-70",children:"Enable log validation"})]}),e.jsxs(P,{onClick:()=>$("selected"),className:"p-4 h-auto flex flex-col items-center gap-2",disabled:!f,children:[e.jsx("div",{className:"text-2xl",children:"🎯"}),e.jsx("div",{className:"text-sm",children:"Fix Selected Control"}),e.jsx("div",{className:"text-xs opacity-70",children:"Remediate all resources"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:["FAIL","WARN","PASS"].map(u=>{const w=a.controls.filter(j=>j.status===u),N={FAIL:{label:"Failed Controls",color:"border-red-500/30 bg-red-500/10"},WARN:{label:"Warnings",color:"border-amber-500/30 bg-amber-500/10"},PASS:{label:"Passed Controls",color:"border-emerald-500/30 bg-emerald-500/10"}}[u];return e.jsxs(I,{className:`p-6 border-2 ${N.color}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"font-semibold text-lg",children:N.label}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Q(u)}`,children:w.length})]}),e.jsxs("div",{className:"space-y-3",children:[w.map(j=>{const A=Y(j.id,j.title);return e.jsxs("button",{className:`w-full text-left p-4 rounded-lg border transition-all ${m===j.id?"border-jc-cyan bg-jc-cyan/10":"border-white/20 bg-white/5 hover:bg-white/10"}`,onClick:()=>o(j.id),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"font-medium text-sm",children:[j.id," — ",j.title]}),j.status==="FAIL"&&e.jsx(G,{severity:A,showIcon:!1})]}),e.jsxs("div",{className:"text-xs text-jc-dim",children:["Pass ",j.pass," · Fail ",j.fail," · Warn ",j.warn]}),j.resources.length>0&&e.jsxs("div",{className:"text-xs text-jc-dim mt-1",children:[j.resources.length," resource",j.resources.length!==1?"s":""]})]},j.id)}),w.length===0&&e.jsxs("div",{className:"text-sm text-jc-dim text-center py-4",children:["No ",u.toLowerCase()," controls"]})]})]},u)})}),e.jsxs(I,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Control Details"}),f&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{severity:Y(f.id,f.title)}),e.jsxs("div",{className:"text-sm text-jc-dim",children:[f.id," — ",f.title]})]})]}),!f&&e.jsx("div",{className:"text-center py-8 text-jc-dim",children:"Select a control above to view resource details"}),f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-jc-dim",children:"Status"}),e.jsx("div",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${Q(f.status)}`,children:f.status})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-jc-dim",children:"Resources"}),e.jsx("div",{className:"font-medium",children:f.resources.length})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-jc-dim",children:"Failed"}),e.jsx("div",{className:"font-medium text-red-400",children:f.fail})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-jc-dim",children:"Passed"}),e.jsx("div",{className:"font-medium text-emerald-400",children:f.pass})]})]}),f.resources.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b border-white/20",children:[e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Resource ARN"}),e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Service"}),e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Region"}),e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Finding ID"}),e.jsx("th",{className:"py-3 pr-4 font-medium",children:"Note"}),e.jsx("th",{className:"py-3 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:f.resources.map((u,w)=>e.jsxs("tr",{className:"border-b border-white/10 last:border-none",children:[e.jsx("td",{className:"py-3 pr-4 font-mono text-xs break-all",children:u.arn}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:"inline-block px-2 py-1 bg-jc-cyan/20 text-jc-cyan rounded text-xs font-medium",children:u.service.toUpperCase()})}),e.jsx("td",{className:"py-3 pr-4 text-jc-dim",children:u.region}),e.jsx("td",{className:"py-3 pr-4",children:u.findingId?e.jsx("span",{className:"text-xs font-mono text-jc-dim break-all",children:u.findingId}):e.jsx("span",{className:"text-jc-dim",children:"—"})}),e.jsx("td",{className:"py-3 pr-4 text-jc-dim",children:u.note||"—"}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{onClick:()=>X(u.arn),disabled:d===u.arn,className:"px-3 py-1 text-xs",children:d===u.arn?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-white"}),"Remediating..."]}):"Remediate"}),e.jsx(ps,{controlId:f.id})]})})]},w))})]})}):e.jsx("div",{className:"text-center py-8 text-jc-dim",children:"No resources associated with this control"}),f.resources.length>0&&e.jsx("div",{className:"flex gap-3 pt-4 border-t border-white/20",children:e.jsx(P,{onClick:()=>X(),disabled:d==="all",className:"px-4 py-2",children:d==="all"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Remediating All..."]}):"Remediate All Resources"})})]})]})]}),e.jsx(ms,{isOpen:k,onClose:()=>_(!1),onExecute:xe,controls:R,title:T,description:y})]})}function ps({controlId:s}){const[i,a]=c.useState(!1),[n,t]=c.useState(!1),[l,r]=c.useState([]),[x,m]=c.useState(null);async function o(){t(!0),m(null);try{const d=await ls(s);r(d.items||[])}catch(d){m(d instanceof Error?d.message:"Failed to load evidence"),r([])}finally{t(!1)}}return e.jsxs(e.Fragment,{children:[e.jsx(P,{onClick:()=>{a(!0),o()},className:"px-3 py-1 text-xs",children:"Evidence"}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>a(!1),children:e.jsxs("div",{className:"bg-black/90 border border-white/20 rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-hidden",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:["Evidence for ",s]}),e.jsx(P,{onClick:()=>a(!1),className:"px-3 py-1",children:"Close"})]}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:n?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-jc-cyan"}),e.jsx("span",{className:"ml-3 text-jc-dim",children:"Loading evidence..."})]}):x?e.jsxs("div",{className:"p-4 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300 text-sm",children:["Error: ",x]}):l.length>0?e.jsx("div",{className:"space-y-4",children:l.map((d,h)=>{var v;return e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-sm capitalize",children:((v=d.type)==null?void 0:v.replace("_"," "))||"Evidence Item"}),e.jsx("span",{className:"text-xs text-jc-dim",children:d.timestamp?Ve(d.timestamp):"Unknown date"})]}),e.jsx("div",{className:"text-sm text-jc-dim mb-2",children:d.details}),d.findings&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-jc-dim",children:"Findings:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-xs text-jc-dim ml-2",children:d.findings.map((g,k)=>e.jsx("li",{children:g},k))})]}),d.recommendations&&e.jsxs("div",{className:"space-y-1 mt-2",children:[e.jsx("div",{className:"text-xs font-medium text-jc-dim",children:"Recommendations:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-xs text-jc-dim ml-2",children:d.recommendations.map((g,k)=>e.jsx("li",{children:g},k))})]})]},h)})}):e.jsx("div",{className:"text-center py-8 text-jc-dim",children:"No evidence available for this control"})})]})})]})}function F(s="reveal",i=0){const a=c.useRef(null);return c.useEffect(()=>{const n=a.current;if(!n)return;n.classList.add(s);const t=new IntersectionObserver(([l])=>{l.isIntersecting&&(setTimeout(()=>n.classList.add("in"),i),t.disconnect())},{threshold:.15});return t.observe(n),()=>t.disconnect()},[s,i]),a}const gs=[{name:"Fredy Tapia",role:"Project Manager",bio:"Leading product strategy and team coordination for JohnnyCloud's mission to simplify AWS operations.",email:"neofredy.tapia@gmail.com",linkedinUrl:"https://linkedin.com/in/fredy-tapia",githubUrl:"https://github.com/fredytapia",imageUrl:"/images/about/team-photos/fredy-tapia-project-manager.jpg"},{name:"Roman Canger",role:"Business Analyst",bio:"Analyzing cloud cost patterns and business requirements to drive data-driven optimization decisions.",email:"rcanger@gmail.com",linkedinUrl:"https://linkedin.com/in/roman-canger",githubUrl:"https://github.com/romancanger",imageUrl:"/images/about/team-photos/roman-canger-business-analyst.jpg"},{name:"Hamad Iqbal",role:"Cloud Infrastructure Architect",bio:"Designing scalable AWS architectures and implementing security best practices across cloud environments.",email:"hamadkhan123@gmail.com",linkedinUrl:"https://linkedin.com/in/hamad-iqbal",githubUrl:"https://github.com/hamadiqbal",imageUrl:"/images/about/team-photos/hamad-iqbal-cloud-architect.jpg"},{name:"Chandramati Hiregoudra",role:"Cloud Infrastructure Architect / Application Developer",bio:"Building robust cloud solutions and developing applications that make AWS management intuitive.",email:"cvhiregoudra16@gmail.com",linkedinUrl:"https://linkedin.com/in/chandramati-hiregoudra",githubUrl:"https://github.com/chandramati",imageUrl:"/images/about/team-photos/chandramati-hiregoudra-developer.jpg"},{name:"Eskinder Kassahun",role:"Cloud Infrastructure Architect / Application Developer",bio:"Creating seamless user experiences and implementing cloud-native solutions for enterprise customers.",email:"eskewabe185@gmail.com",linkedinUrl:"https://linkedin.com/in/eskinder-kassahun",githubUrl:"https://github.com/eskinder",imageUrl:"/images/about/team-photos/eskinder-kassahun-developer.jpg"}],bs=c.lazy(()=>E(()=>import("./components-ea165bfd.js").then(s=>s.T),["assets/components-ea165bfd.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js"])),fs=c.lazy(()=>E(()=>import("./components-ea165bfd.js").then(s=>s.R),["assets/components-ea165bfd.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js"])),js=c.lazy(()=>E(()=>import("./components-ea165bfd.js").then(s=>s.O),["assets/components-ea165bfd.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js"])),ys=c.lazy(()=>E(()=>import("./components-ea165bfd.js").then(s=>s.S),["assets/components-ea165bfd.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js"])),vs="/images/about/hero.jpg",Z=({children:s,className:i=""})=>e.jsx("div",{className:`rounded-2xl border bg-white/5 p-5 ${i}`,children:s});function qs(){const s=F("reveal-right",80),i=F("reveal",0),a=F("reveal-left",0),n=F("reveal",120),t=F("reveal-right",240),l=F("reveal",0);return e.jsxs("div",{className:"p-6 space-y-12",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"About JohnnyCloud"}),e.jsx("p",{className:"text-xl text-white/70",children:"The team and story behind your AWS FinOps and SecOps companion"})]}),e.jsxs("section",{className:"grid lg:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{ref:i,children:[e.jsx("h2",{className:"text-3xl font-semibold text-white mb-4",children:"Our Mission"}),e.jsxs("div",{className:"space-y-4 text-white/80 leading-relaxed",children:[e.jsxs("p",{children:["JohnnyCloud unifies FinOps and SecOps for AWS—continuous optimization insights, compliance Guardrails (CIS/NIST/PCI), and one-click auto-remediation for common risks, plus a clear ",e.jsx("em",{children:"Why AWS"})," view to explain the value."]}),e.jsx("p",{children:"Use the chat assistant for natural-language analysis, remediation plans, and voice summaries. Your data stays in your account; we operate with least-privilege roles and return results to your UI."})]})]}),e.jsx("img",{ref:s,src:vs,alt:"JohnnyCloud team working on AWS solutions",className:"w-full h-[320px] md:h-[400px] object-cover rounded-2xl border float-slow"})]}),e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-white/5 rounded-2xl border animate-pulse"}),children:e.jsx(js,{})}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"How It Works"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Connect your AWS account, let the AI analyze cost, security, and reliability, then act with safe automations."}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs(Z,{ref:a,className:"card-lift",children:[e.jsx("div",{className:"text-cyan-300 text-xs font-medium mb-2",children:"01"}),e.jsx("div",{className:"text-white font-semibold text-lg mb-2",children:"Connect"}),e.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:"Link AWS with cross-account roles. Read-only by default; elevate only for approved automations."})]}),e.jsxs(Z,{ref:n,className:"card-lift",children:[e.jsx("div",{className:"text-cyan-300 text-xs font-medium mb-2",children:"02"}),e.jsx("div",{className:"text-white font-semibold text-lg mb-2",children:"Analyze"}),e.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:"Pull CloudWatch, Cost Explorer, Security Hub & GuardDuty to compute savings, posture, and drift."})]}),e.jsxs(Z,{ref:t,className:"card-lift",children:[e.jsx("div",{className:"text-cyan-300 text-xs font-medium mb-2",children:"03"}),e.jsx("div",{className:"text-white font-semibold text-lg mb-2",children:"Act"}),e.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:"Trigger auto-remediation (e.g., block S3 public access) and produce evidence for audits."})]})]})]}),e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-80 bg-white/5 rounded-2xl border animate-pulse"}),children:e.jsx(fs,{})}),e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-white/5 rounded-2xl border animate-pulse"}),children:e.jsx(ys,{})}),e.jsxs("section",{ref:l,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"Our Team"}),e.jsx("p",{className:"text-white/70",children:"The people behind JohnnyCloud—cloud architecture, security, and product experts."})]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:gs.map((r,x)=>e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-80 bg-white/5 rounded-2xl border animate-pulse"}),children:e.jsx(bs,{member:r,index:x})},r.email))})]})]})}function ws({className:s=""}){const i=J.useRef(null),a=J.useRef(null);return J.useEffect(()=>{const n=i.current,t=n.getContext("2d");let l=n.width=n.offsetWidth*devicePixelRatio,r=n.height=n.offsetHeight*devicePixelRatio;const x=()=>{l=n.width=n.offsetWidth*devicePixelRatio,r=n.height=n.offsetHeight*devicePixelRatio},m=[];let o=0,d=0;function h(){const g=Math.min(l,r)*.42,k=Math.random()*Math.PI*2,_=g*Math.sqrt(Math.random()),R=l/2+Math.cos(k)*_,C=r*.6+Math.sin(k)*_;m.push({x:R,y:C,r:6*devicePixelRatio,life:1})}function v(g){a.current=requestAnimationFrame(v);const k=(g-d)/1e3;d=g,o+=k*.6,Math.random()<.05&&h(),t.clearRect(0,0,l,r),t.fillStyle="rgba(0,230,255,0.05)";for(let S=0;S<l;S+=24*devicePixelRatio)t.fillRect(S,0,1*devicePixelRatio,r);for(let S=0;S<r;S+=24*devicePixelRatio)t.fillRect(0,S,l,1*devicePixelRatio);const _=l/2,R=r*.6,C=Math.min(l,r)*.42;for(let S=C;S>C*.2;S-=C/6)t.beginPath(),t.arc(_,R,S,0,Math.PI*2),t.strokeStyle="rgba(0,230,255,0.12)",t.lineWidth=2*devicePixelRatio,t.stroke();const T=t.createConicGradient(o,_,R);T.addColorStop(0,"rgba(0,230,255,0.24)"),T.addColorStop(.35,"rgba(0,230,255,0)"),T.addColorStop(1,"rgba(0,230,255,0)"),t.fillStyle=T,t.beginPath(),t.moveTo(_,R),t.arc(_,R,C,o,o+Math.PI*.6),t.closePath(),t.fill();for(let S=m.length-1;S>=0;S--){const y=m[S];if(y.life-=k*.3,y.life<=0){m.splice(S,1);continue}const p=Math.max(y.life,0);t.beginPath(),t.arc(y.x,y.y,y.r*(1.2-y.life*.2),0,Math.PI*2),t.strokeStyle=`rgba(0,230,255,${.6*p})`,t.lineWidth=2*devicePixelRatio,t.stroke(),t.fillStyle=`rgba(124,255,178,${.25*p})`,t.beginPath(),t.arc(y.x,y.y,2*devicePixelRatio,0,Math.PI*2),t.fill()}}return a.current=requestAnimationFrame(v),window.addEventListener("resize",x),()=>{a.current&&cancelAnimationFrame(a.current),window.removeEventListener("resize",x)}},[]),e.jsx("canvas",{ref:i,className:`w-full h-full ${s}`})}const L=[{id:"what-is-johnnycloud",category:"General",q:"What is JohnnyCloud?",a:`JohnnyCloud is an AI-powered FinOps + SecOps companion for AWS. It
analyzes your accounts for savings opportunities, surfaces compliance Guardrails
(CIS/NIST/PCI), and can trigger safe auto-remediation for common risks like
S3 public access. You can also ask the assistant (with optional voice replies)
for summaries, next steps, or a Why AWS business case.`,tags:["overview","finops","secops","guardrails"]},{id:"how-it-works",category:"General",q:"How does JohnnyCloud work?",a:`You connect your AWS account via least-privilege roles. We read metrics
(Cost Explorer/CloudWatch) and posture signals (Security Hub/GuardDuty) to
compute savings and compliance scores. From the Guardrails page you can run
prebuilt SSM Automation runbooks (e.g., block S3 public access) and download
evidence for audits.`,tags:["onboarding","permissions"]},{id:"why-aws",category:"General",q:'What is the "Why AWS" page?',a:`It's a value dashboard. We combine cost savings estimates, security score,
reliability readiness (backups/Multi-AZ/RTO/RPO) and efficiency (managed &
serverless adoption) so you can explain the business case clearly. See the value dashboard on the Why AWS page.`,tags:["value","roi","modernization"]},{id:"voice",category:"General",q:"Can the assistant speak responses?",a:`Yes. Toggle "Speak reply" above the chat and pick a voice. The app uses
Amazon Polly to synthesize answers. No microphone is required unless you enable
voice input (optional Transcribe integration).`,tags:["voice","polly"]},{id:"setup-time",category:"General",q:"How long does it take to set up?",a:`Most teams see the dashboard within 10–20 minutes after connecting an
account. Guardrails and auto-remediation can be enabled progressively.`,tags:["onboarding","time"]},{id:"cost-sources",category:"Costs",q:"Where do savings estimates come from?",a:`From a combination of Cost Explorer data and best-practice checks:
rightsizing, idle resources, scheduling, and Savings Plans/CUDOs coverage. The
total shown is a directional estimate until you apply changes.`,tags:["estimates","rightsizing","scheduling"]},{id:"real-time",category:"Costs",q:"Is the metrics data real-time?",a:`AWS cost data is near-real-time and can lag a few hours depending on the
service. We show the latest available window and date-stamp the snapshot.`,tags:["freshness","lag"]},{id:"frameworks",category:"Security",q:"Which compliance frameworks are supported?",a:`CIS AWS Foundations Benchmark by default, plus NIST and PCI where
enabled in Security Hub. You can switch frameworks from the Guardrails page.`,tags:["cis","nist","pci","security hub"]},{id:"guardrails",category:"Security",q:"What are Guardrails?",a:`Guardrails are continuous checks mapped to standards (e.g., CIS-1.1 "S3
Block Public Access"). The page shows PASS/FAIL/WARN by control with affected
resources. You can click Remediate to run an SSM Automation (e.g., block public
ACL/policy) and view/download evidence. Open Guardrails to see them in action.`,tags:["controls","remediation","evidence"]},{id:"remediation-safety",category:"Security",q:"Is auto-remediation safe?",a:`Yes—remediation is explicit and scoped. Each runbook shows what it does,
supports dry-run where possible, and executes via a role you control. Evidence
(records and execution IDs) is saved for audit trails.`,tags:["ssm","least-privilege","audit"]},{id:"data-security",category:"Security",q:"What data do you store?",a:`By default, we read from your account and return results to the UI. We do
not store sensitive data outside your account. Remediation evidence and chat
threads can be saved in your own DynamoDB tables if you enable that option.`,tags:["privacy","storage"]},{id:"faq-404-guardrails",category:"Troubleshooting",q:"I get 404 for /guardrails/summary.",a:`Add an API Gateway route: ANY /guardrails/{proxy+} → your guardrails
Lambda. Deploy the stage. If you prefer explicit routes, add:
GET /guardrails/summary, POST /guardrails/remediate, GET /guardrails/evidence.`,tags:["api-gateway","routes"]},{id:"faq-cors",category:"Troubleshooting",q:"The browser shows a CORS error.",a:`Return CORS headers from Lambda (and/or enable CORS on the API):
access-control-allow-origin: your CloudFront URL,
access-control-allow-headers: content-type,authorization,
access-control-allow-methods: GET,POST,OPTIONS. Also handle OPTIONS with 204.`,tags:["cors","options"]},{id:"faq-500-chat",category:"Troubleshooting",q:"Ask JohnnyCloud fails with 500.",a:`Check CloudWatch logs for your /chat Lambda. Common causes:
1) bedrock:InvokeModel not allowed or wrong model ID (use claude-3-5-sonnet or haiku),
2) polly:SynthesizeSpeech missing (if Speak reply is on),
3) DynamoDB table missing/denied for chat threads,
4) Malformed JSON body—add a safe body parser.`,tags:["bedrock","polly","dynamodb"]},{id:"faq-env",category:"Troubleshooting",q:"Which frontend environment variables are required?",a:`Minimum: VITE_CHAT_API, VITE_GUARDRAILS_API, VITE_METRICS_API (or an
optimize endpoint). Optional: VITE_WHY_AWS_IMAGE (hero), VITE_ABOUT_HERO_IMAGE.
Always restart Vite after editing .env.`,tags:["env","vite"]},{id:"faq-permissions",category:"Troubleshooting",q:"What AWS permissions are needed?",a:`Read paths: Cost Explorer (ce:Get*), Security Hub (GetFindings), GuardDuty
(List/GetFindings). Remediation: ssm:StartAutomationExecution plus the actions
inside each runbook (e.g., s3:PutPublicAccessBlock). Chat: bedrock:InvokeModel;
voice: polly:SynthesizeSpeech; evidence: dynamodb:PutItem/Query on your tables.`,tags:["iam","roles"]}],le=[{id:"general",name:"General",icon:"?",count:L.filter(s=>s.category==="General").length,items:L.filter(s=>s.category==="General").map(s=>({question:s.q,answer:s.id==="why-aws"?"It's a value dashboard. We combine cost savings estimates, security score, reliability readiness (backups/Multi-AZ/RTO/RPO) and efficiency (managed & serverless adoption) so you can explain the business case clearly. See the value dashboard on the Why AWS page.":s.a}))},{id:"costs",name:"Costs",icon:"$",count:L.filter(s=>s.category==="Costs").length,items:L.filter(s=>s.category==="Costs").map(s=>({question:s.q,answer:s.a}))},{id:"security",name:"Security",icon:"🛡️",count:L.filter(s=>s.category==="Security").length,items:L.filter(s=>s.category==="Security").map(s=>({question:s.q,answer:s.id==="guardrails"?'Guardrails are continuous checks mapped to standards (e.g., CIS-1.1 "S3 Block Public Access"). The page shows PASS/FAIL/WARN by control with affected resources. You can click Remediate to run an SSM Automation (e.g., block public ACL/policy) and view/download evidence. Open Guardrails to see them in action.':s.a}))},{id:"troubleshooting",name:"Troubleshooting",icon:"⚠️",count:L.filter(s=>s.category==="Troubleshooting").length,items:L.filter(s=>s.category==="Troubleshooting").map(s=>({question:s.q,answer:s.a}))}];function Hs(){var m;const[s,i]=c.useState("general"),[a,n]=c.useState(""),[t,l]=c.useState(new Set),r=o=>{const d=new Set(t);d.has(o)?d.delete(o):d.add(o),l(d)},x=((m=le.find(o=>o.id===s))==null?void 0:m.items.filter(o=>{const d=a.toLowerCase(),h=L.find(v=>v.q===o.question);return o.question.toLowerCase().includes(d)||o.answer.toLowerCase().includes(d)||h&&h.tags.some(v=>v.toLowerCase().includes(d))}))||[];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-56 rounded-2xl overflow-hidden jc-card mb-8",children:[e.jsx(ws,{className:"absolute inset-0"}),e.jsxs("div",{className:"relative p-6",children:[e.jsx(U,{className:"text-3xl",children:"Security FAQs"}),e.jsx("p",{className:"text-jc-dim",children:"Scanning… live radar effect."})]})]}),e.jsxs("header",{className:"mb-8",children:[e.jsx(U,{className:"text-4xl md:text-5xl",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-jc-dim text-lg mt-4 max-w-3xl",children:"Find answers about cost insights, Guardrails, auto-remediation, voice replies, and setup."})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative max-w-2xl",children:[e.jsx("input",{type:"text",placeholder:"Search FAQs…",value:a,onChange:o=>n(o.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl p-4 pl-12 focus-glow"}),e.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-jc-dim",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:le.map(o=>e.jsxs("button",{onClick:()=>i(o.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${s===o.id?"bg-jc-cyan/20 border-jc-cyan text-jc-cyan":"bg-white/5 border-white/10 text-jc-dim hover:bg-white/10"}`,children:[e.jsx("span",{className:"text-lg",children:o.icon}),e.jsx("span",{className:"font-medium",children:o.name}),e.jsx("span",{className:"text-xs bg-white/10 px-2 py-1 rounded-full",children:o.count})]},o.id))}),e.jsx("div",{className:"space-y-4 mb-12",children:x.map((o,d)=>{const h=`${s}-${d}`,v=t.has(h);return e.jsxs(I,{className:"p-0 overflow-hidden",children:[e.jsxs("button",{onClick:()=>r(h),className:"w-full p-6 text-left flex items-center justify-between hover:bg-white/5 transition-colors",children:[e.jsx("span",{className:"font-medium text-lg",children:o.question}),e.jsx("svg",{className:`w-5 h-5 text-jc-dim transition-transform ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&e.jsx("div",{className:"px-6 pb-6",children:e.jsx("p",{className:"text-jc-dim leading-relaxed",children:o.answer.split(" ").map((g,k)=>g==="Why"&&o.answer.split(" ")[k+1]==="AWS"?e.jsxs("span",{children:[e.jsx("a",{href:"/why-aws",className:"underline hover:text-jc-cyan transition-colors",children:"Why AWS"})," "]},k):g==="Guardrails"&&o.answer.split(" ")[k-1]==="Open"?e.jsxs("span",{children:[e.jsx("a",{href:"/guardrails",className:"underline hover:text-jc-cyan transition-colors",children:"Guardrails"})," "]},k):g+" ")})})]},h)})}),e.jsxs(I,{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-jc-cyan/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-8 h-8 text-jc-cyan",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(U,{className:"text-3xl md:text-4xl mb-4",children:"Still Need Help?"}),e.jsx("p",{className:"text-jc-dim text-lg mb-8 max-w-2xl mx-auto",children:"Our support team is here to help you get the most out of JohnnyCloud."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e.jsxs(P,{className:"flex items-center gap-2",onClick:()=>window.open("mailto:eskewabe185@gmail.com?subject=JohnnyCloud Support Request","_blank"),children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email Support"]}),e.jsxs(P,{variant:"outline",className:"flex items-center gap-2",onClick:()=>window.open("mailto:eskewabe185@gmail.com?subject=JohnnyCloud Slack Invite Request","_blank"),children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52-2.523A2.528 2.528 0 0 1 5.042 10.12h2.52v2.522a2.528 2.528 0 0 1-2.52 2.523zm0-6.048H2.522A2.528 2.528 0 0 0 0 11.64a2.528 2.528 0 0 0 2.522 2.523h2.52v-2.523a2.528 2.528 0 0 0-2.52-2.523zm6.048 0H8.562v2.522a2.528 2.528 0 0 1-2.52 2.523 2.528 2.528 0 0 1-2.522-2.523V9.117H.98a2.528 2.528 0 0 0-2.52 2.523 2.528 2.528 0 0 0 2.52 2.523h2.52v2.522a2.528 2.528 0 0 0 2.522 2.523 2.528 2.528 0 0 0 2.52-2.523v-2.522h2.52a2.528 2.528 0 0 0 2.52-2.523 2.528 2.528 0 0 0-2.52-2.523z"})}),"Join Our Slack"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-jc-cyan mb-1",children:"Email"}),e.jsx("div",{className:"text-jc-dim",children:"eskewabe185@gmail.com"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-jc-cyan mb-1",children:"Response Time"}),e.jsx("div",{className:"text-jc-dim",children:"Within 24 hours"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-jc-cyan mb-1",children:"Documentation"}),e.jsx("div",{className:"text-jc-dim",children:"docs.johnnycloud.io"})]})]})]})]})}function Vs(){const s=()=>{qe()};return e.jsx("main",{className:"relative min-h-[calc(100vh-64px)] text-slate-100",children:e.jsx("section",{className:"mx-auto max-w-7xl px-6 pb-16 pt-12 md:pt-20",children:e.jsxs("div",{className:"grid gap-10 md:grid-cols-2 md:items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"inline-block rounded-full border border-cyan-400/30 bg-cyan-400/10 px-3 py-1 text-xs tracking-wide text-cyan-300",children:"Secure access"}),e.jsxs("h1",{className:"mt-4 text-4xl font-bold leading-tight sm:text-5xl",children:["Sign in to"," ",e.jsx("span",{className:"bg-gradient-to-r from-cyan-300 via-sky-400 to-fuchsia-400 bg-clip-text text-transparent",children:"JohnnyCloud"})]}),e.jsxs("p",{className:"mt-4 max-w-xl text-slate-300/90",children:["Access your ",e.jsx("span",{className:"text-cyan-300",children:"Cost"})," &"," ",e.jsx("span",{className:"text-fuchsia-300",children:"Security Anomaly"})," dashboards, AI chat (Bedrock), and voice integrations—powered by Amazon Cognito."]}),e.jsxs("ul",{className:"mt-8 space-y-3 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5 text-cyan-300"}),"OAuth2 Authorization Code + PKCE (no passwords stored in app)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-5 w-5 text-cyan-300"}),"CloudFront-compatible HTTPS domain"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5 text-cyan-300"}),"Least-cost, serverless frontend"]})]}),e.jsxs("div",{className:"mt-8 flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:s,className:"group inline-flex items-center gap-2 rounded-xl border border-cyan-400/40 bg-cyan-400/10 px-5 py-3 font-medium text-cyan-100 shadow-[0_0_25px_rgba(0,255,255,0.08)] backdrop-blur transition hover:bg-cyan-400/20 hover:shadow-[0_0_30px_rgba(0,255,255,0.2)]",children:[e.jsx("img",{src:"https://raw.githubusercontent.com/simple-icons/simple-icons/develop/icons/amazonaws.svg",className:"h-5 w-5 invert",alt:""}),"Sign in with Cognito",e.jsx(Fe,{className:"h-4 w-4 transition group-hover:translate-x-0.5"})]}),e.jsx("a",{href:"/",className:"inline-flex items-center rounded-xl border border-white/10 bg-white/5 px-5 py-3 text-slate-200 hover:bg-white/10",children:"Back to Home"})]}),e.jsxs("p",{className:"mt-4 text-xs text-slate-400",children:["By continuing, you agree to our"," ",e.jsx("a",{href:"/terms",className:"text-cyan-300 hover:underline",children:"Terms"})," ","and"," ",e.jsx("a",{href:"/privacy",className:"text-cyan-300 hover:underline",children:"Privacy"}),"."]})]}),e.jsxs("div",{className:"relative mx-auto w-full max-w-[560px]",children:[e.jsx("div",{className:"absolute -inset-[1px] rounded-3xl bg-gradient-to-r from-cyan-500/40 via-transparent to-fuchsia-500/40 blur md:blur-lg"}),e.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 shadow-2xl backdrop-blur-md",children:[e.jsx("img",{src:"/johnny5_login.png",className:"h-[460px] w-full object-cover",alt:"Johnny-5, ready to help",onError:i=>{const a=i.currentTarget;a.style.display="none";const n=document.getElementById("img-fallback");n&&(n.style.display="flex")}}),e.jsx("div",{id:"img-fallback",className:`hidden h-[460px] w-full rounded-xl border border-white/10
                  bg-[repeating-linear-gradient(45deg,rgba(255,255,255,0.06)_0px,rgba(255,255,255,0.06)_2px,transparent_2px,transparent_8px)] 
                  text-center items-center justify-center p-6`,children:e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold mb-1",children:"Add your Johnny-5 image"}),e.jsxs("div",{className:"text-sm text-slate-400",children:["Place a file at ",e.jsx("code",{className:"px-1 rounded bg-white/5",children:"/public/johnny5_login.png"}),". Use your own render or a licensed photo."]})]})}),e.jsx("div",{className:"jc-glow-line"}),e.jsxs("div",{className:"flex items-center justify-between px-5 py-4",children:[e.jsxs("div",{className:"text-sm text-slate-300",children:[e.jsx("div",{className:"font-semibold text-slate-100",children:"Johnny-5"}),e.jsx("div",{className:"text-slate-400/80",children:"Your AWS FinOps + SecOps assistant"})]}),e.jsx("div",{className:"rounded-full border border-cyan-400/30 bg-cyan-400/10 px-3 py-1 text-xs text-cyan-200",children:"Online"})]})]})]})]})})})}function Ns(){const[s,i]=c.useState({savings:{monthlyEstimate:null,loading:!0,error:null},security:{score:null,topFails:[],loading:!0,error:null},reliability:{backupCoverage:null,multiAZCoverage:null,loading:!0,error:null},efficiency:{serverlessPct:null,managedPct:null,loading:!0,error:null}});return c.useEffect(()=>{(async()=>{const n=W();if(!n||!q()){i(m=>({savings:{...m.savings,loading:!1,error:"not_authenticated"},security:{...m.security,loading:!1,error:"not_authenticated"},reliability:{...m.reliability,loading:!1,error:"not_authenticated"},efficiency:{...m.efficiency,loading:!1,error:"not_authenticated"}}));return}const t="https://4z2t2pj4r4.execute-api.us-east-1.amazonaws.com/metrics",l={}.VITE_GUARDRAILS_API;console.log("KPI: Fetching data from:",{metricsApi:t,guardrailsApi:l});const r=[];r.push(fetch(`${t}/summary`,{headers:{Authorization:`Bearer ${n}`}}).then(async m=>{var o,d;if(m.ok){const h=await m.json();console.log("KPI: Metrics data:",h);let v=null;if((o=h.savings)!=null&&o.totalSavings){const g=new Date().getMonth(),k=Math.floor(g/3)+1;v=h.savings.totalSavings/k}else(d=h.savings)!=null&&d.topActions&&(v=h.savings.topActions.reduce((g,k)=>g+(k.savings||0),0));return{type:"savings",data:v,error:null}}return{type:"savings",data:null,error:"API error"}}).catch(m=>(console.error("KPI: Metrics API error:",m),{type:"savings",data:null,error:"Failed to fetch"}))),l?r.push(fetch(`${l}/summary?framework=CIS`,{headers:{Authorization:`Bearer ${n}`}}).then(async m=>{if(m.ok){const o=await m.json();console.log("KPI: Guardrails data:",o);const d=(o.controls||[]).filter(h=>h.status==="FAIL").slice(0,2).map(h=>h.id||h.title||"Unknown control");return{type:"security",data:{score:o.score,topFails:d},error:null}}return{type:"security",data:{score:null,topFails:[]},error:"API error"}}).catch(m=>(console.error("KPI: Guardrails API error:",m),{type:"security",data:{score:null,topFails:[]},error:"Failed to fetch"}))):r.push(Promise.resolve({type:"security",data:{score:null,topFails:[]},error:"No API configured"})),r.push(fetch(`${t}/reliability`,{headers:{Authorization:`Bearer ${n}`}}).then(async m=>{if(m.ok){const o=await m.json();return console.log("KPI: Reliability data:",o),{type:"reliability",data:{backupCoverage:o.backupCoverage||null,multiAZCoverage:o.multiAZCoverage||null},error:null}}return{type:"reliability",data:{backupCoverage:null,multiAZCoverage:null},error:"API error"}}).catch(m=>(console.error("KPI: Reliability API error:",m),{type:"reliability",data:{backupCoverage:null,multiAZCoverage:null},error:"Failed to fetch"}))),r.push(fetch(`${t}/efficiency`,{headers:{Authorization:`Bearer ${n}`}}).then(async m=>{if(m.ok){const o=await m.json();return console.log("KPI: Efficiency data:",o),{type:"efficiency",data:{serverlessPct:o.serverlessPct||null,managedPct:o.managedPct||null},error:null}}return{type:"efficiency",data:{serverlessPct:null,managedPct:null},error:"API error"}}).catch(m=>(console.error("KPI: Efficiency API error:",m),{type:"efficiency",data:{serverlessPct:null,managedPct:null},error:"Failed to fetch"})));const x=await Promise.all(r);i(m=>{const o={...m};return x.forEach(d=>{switch(d.type){case"savings":o.savings={monthlyEstimate:d.data,loading:!1,error:d.error};break;case"security":o.security={score:d.data.score,topFails:d.data.topFails,loading:!1,error:d.error};break;case"reliability":o.reliability={backupCoverage:d.data.backupCoverage,multiAZCoverage:d.data.multiAZCoverage,loading:!1,error:d.error};break;case"efficiency":o.efficiency={serverlessPct:d.data.serverlessPct,managedPct:d.data.managedPct,loading:!1,error:d.error};break}}),o})})()},[]),s}function z({title:s,value:i,subtitle:a,loading:n=!1,error:t=null,emptyState:l,className:r=""}){const x=!n&&!t&&(i===null||i==="—"||i==="");return e.jsxs("div",{className:`rounded-2xl border bg-white/5 p-5 ${r}`,children:[e.jsx("div",{className:"text-sm opacity-70 mb-1",children:s}),n?e.jsx("div",{className:"h-8 bg-white/10 rounded animate-pulse mb-2"}):t?e.jsx("div",{className:"text-red-400 text-sm mb-2",children:"Error loading data"}):x&&l?e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-2xl font-semibold text-white/50 mb-2",children:l.message}),e.jsxs("a",{href:l.cta.href,onClick:()=>{l.cta.analyticsEvent&&typeof window<"u"&&window.gtag&&window.gtag("event",l.cta.analyticsEvent,{kpi_title:s,cta_text:l.cta.text,href:l.cta.href}),l.cta.onClick&&l.cta.onClick()},className:"inline-flex items-center gap-1 text-xs text-cyan-400 hover:text-cyan-300 transition-colors",children:[l.cta.text," →"]})]}):e.jsx("div",{className:"text-2xl font-semibold text-white mb-2",children:i}),a&&!n&&!t&&!x&&e.jsx("div",{className:"text-xs opacity-70",children:a})]})}const Ss=c.lazy(()=>E(()=>import("./components-ea165bfd.js").then(s=>s.I),["assets/components-ea165bfd.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js"])),ks=c.lazy(()=>E(()=>import("./components-ea165bfd.js").then(s=>s.B),["assets/components-ea165bfd.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js"])),Cs=c.lazy(()=>E(()=>import("./components-ea165bfd.js").then(s=>s.C),["assets/components-ea165bfd.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js"])),As=c.lazy(()=>E(()=>import("./components-ea165bfd.js").then(s=>s.a),["assets/components-ea165bfd.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js"])),Is=c.lazy(()=>E(()=>import("./components-ea165bfd.js").then(s=>s.b),["assets/components-ea165bfd.js","assets/react-vendor-7e64a64e.js","assets/utils-f5112557.js"])),oe=({children:s})=>e.jsx("h2",{className:"text-3xl font-semibold mb-2",children:s}),Ps=({children:s,className:i=""})=>e.jsx("p",{className:`opacity-80 ${i}`,children:s}),_s=({children:s,className:i=""})=>e.jsx("div",{className:`rounded-2xl border bg-white/5 p-5 ${i}`,children:s}),Rs="/images/why-aws/hero.jpg";async function Es(){try{const s={}.VITE_GUARDRAILS_API?`${{}.VITE_GUARDRAILS_API}/summary?framework=CIS`:"",i=s?await(await fetch(s)).json():null;return{savings:{monthlyEstimate:void 0},security:{framework:(i==null?void 0:i.framework)||"CIS",score:(i==null?void 0:i.score)??null,topFails:((i==null?void 0:i.controls)||[]).filter(a=>a.status==="FAIL").slice(0,3).map(a=>a.id)},reliability:{backupsPct:null,multiAZPct:null,rto:null,rpo:null},efficiency:{serverlessPct:null,managedPct:null}}}catch{return null}}function Js(){const[s,i]=c.useState(null),[a,n]=c.useState(!0),[t]=c.useState(Ne.getInput()),l="https://4z2t2pj4r4.execute-api.us-east-1.amazonaws.com/chat",r=Ns();c.useEffect(()=>{let m=!0;return(async()=>{n(!0);const o=await Es();m&&i(o),n(!1)})(),()=>{m=!1}},[]);async function x(m){const o={threadId:"whyaws::default",message:"Summarize business value and refine the migration plan.",speak:!0,voice:"Joanna",valueContext:s??{},...m},h=await(await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();alert(h.reply??"Sent.")}return e.jsxs("div",{className:"p-6 space-y-12",children:[e.jsxs("section",{className:"grid lg:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{children:[e.jsx(oe,{children:"Why AWS"}),e.jsx(Ps,{children:"See cost savings, security posture, reliability readiness, and efficiency—calculated from your account."}),e.jsx("div",{className:"mt-6",children:e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-32 bg-white/5 rounded-2xl border animate-pulse"}),children:e.jsx(Is,{})})}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("a",{href:"/metrics",className:"px-4 py-2 rounded bg-black text-white",children:"Open Optimization Hub"}),e.jsx("a",{href:"/guardrails",className:"px-4 py-2 rounded border hover:bg-white/5",children:"Open Guardrails"}),e.jsx("button",{onClick:()=>x({}),className:"px-4 py-2 rounded border hover:bg-white/5",children:"Ask JohnnyCloud"})]})]}),e.jsx("img",{src:Rs,alt:"JohnnyCloud",className:"w-full h-[320px] object-cover rounded-2xl border"})]}),e.jsxs("section",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(z,{title:"Estimated Savings / mo",value:r.savings.monthlyEstimate?r.savings.monthlyEstimate.toLocaleString(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}):null,subtitle:"Rightsizing + idle + storage transitions",loading:r.savings.loading,error:r.savings.error,emptyState:{message:"No savings recorded yet",cta:{text:"Open Optimization Hub",href:"/metrics",analyticsEvent:"whyaws.kpi.savings.cta.clicked"}}}),e.jsx(z,{title:"Security Posture (CIS)",value:r.security.score?`${r.security.score}%`:null,subtitle:r.security.topFails.length>0?`Top fails: ${r.security.topFails.join(", ")}`:"All controls passing",loading:r.security.loading,error:r.security.error,emptyState:{message:"Enable Security Hub in us-east-1",cta:{text:"View setup guide",href:"/guardrails",analyticsEvent:"whyaws.kpi.security.cta.clicked"}}}),e.jsx(z,{title:"Reliability",value:r.reliability.backupCoverage?`${r.reliability.backupCoverage}% backups`:null,subtitle:r.reliability.multiAZCoverage?`Multi-AZ: ${r.reliability.multiAZCoverage}%`:"Multi-AZ coverage",loading:r.reliability.loading,error:r.reliability.error,emptyState:{message:"No backup telemetry found",cta:{text:"Open Guardrails",href:"/guardrails?filter=reliability",analyticsEvent:"whyaws.kpi.reliability.cta.clicked"}}}),e.jsx(z,{title:"Efficiency",value:r.efficiency.serverlessPct?`${r.efficiency.serverlessPct}% serverless`:null,subtitle:r.efficiency.managedPct?`Managed services: ${r.efficiency.managedPct}% of compute`:"Managed services usage",loading:r.efficiency.loading,error:r.efficiency.error,emptyState:{message:"We couldn't detect managed usage yet",cta:{text:"Open Optimization Hub",href:"/metrics?filter=compute",analyticsEvent:"whyaws.kpi.efficiency.cta.clicked"}}})]}),e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-96 bg-white/5 rounded-2xl border animate-pulse"}),children:e.jsx(Ss,{onAsk:x})}),e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-64 bg-white/5 rounded-2xl border animate-pulse"}),children:e.jsx(ks,{input:t})}),e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-80 bg-white/5 rounded-2xl border animate-pulse"}),children:e.jsx(Cs,{})}),e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-96 bg-white/5 rounded-2xl border animate-pulse"}),children:e.jsx(As,{})}),e.jsxs(_s,{children:[e.jsx(oe,{children:"What this means"}),e.jsxs("ul",{className:"list-disc list-inside text-sm opacity-90 space-y-1",children:[e.jsx("li",{children:"Costs: estimated savings if you act on current recommendations."}),e.jsx("li",{children:"Security: CIS score—focus on your top failing controls."}),e.jsx("li",{children:"Reliability: target RTO/RPO; ensure backups & multi-AZ."}),e.jsx("li",{children:"Efficiency: increase serverless & managed services to reduce ops toil."})]})]}),!a&&!s&&e.jsxs("div",{className:"rounded-2xl border p-5 text-sm opacity-80",children:["No account context yet. Set ",e.jsx("code",{children:"VITE_GUARDRAILS_API"})," (and metrics/optimize if available)."]})]})}export{qs as A,P as B,I as C,Hs as F,Bs as G,Us as H,Vs as L,Gs as M,Js as W,Os as a,Ve as b,zs as f,q as i,e as j,Ws as s,F as u};
