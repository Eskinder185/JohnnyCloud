import{j as e,b as l}from"./pages-d4bf7c9a.js";import{r as m}from"./react-vendor-7e64a64e.js";import{b as u,f as n,g as h}from"./utils-f5112557.js";import"./components-ea165bfd.js";import"./chart-vendor-2e7fb795.js";import"./ui-vendor-2ef6b736.js";function p({anomaly:r}){const d=u(r.currentAmount,r.baselineAmount,r.service,r.driverResource||r.resource,r.region);return e.jsxs("div",{className:"mt-2 p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("div",{className:"text-sm text-slate-300",children:d}),r.notes&&e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:r.notes})]})}function A({anomalies:r,loading:d=!1}){const[x,o]=m.useState(null),i=Array.isArray(r)?r:[],a=()=>{const s=i.map(t=>({timestamp:t.timestamp,period:t.period,service:t.service,resource:t.resource||"",region:t.region||"",baseline_amount:t.baselineAmount,current_amount:t.currentAmount,impact_percent:(t.currentAmount-t.baselineAmount)/Math.max(1,t.baselineAmount)*100,driver_resource:t.driverResource||"",notes:t.notes||""}));h(s)};return d?e.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-48 mb-4"}),e.jsx("div",{className:"space-y-2",children:[1,2,3].map(s=>e.jsx("div",{className:"h-20 bg-white/10 rounded"},s))})]})}):e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-[0_0_20px_rgba(0,0,0,0.25)] backdrop-blur",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Cost Anomalies"}),e.jsx("button",{onClick:a,className:"px-3 py-1 text-xs bg-white/10 hover:bg-white/20 rounded border border-white/20 transition-colors",disabled:i.length===0,children:"Download CSV"})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"No anomalies detected"}):i.map(s=>{const t=(s.currentAmount-s.baselineAmount)/Math.max(1,s.baselineAmount)*100,c=x===s.id;return e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"cursor-pointer",onClick:()=>o(c?null:s.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-sm font-medium text-slate-200",children:[s.service," ",s.resource&&`• ${s.resource}`]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[e.jsx("span",{children:s.period}),s.region&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:s.region})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-sm font-semibold ${t>0?"text-red-400":"text-green-400"}`,children:[t>0?"+":"",t.toFixed(0),"%"]}),e.jsxs("div",{className:"text-xs text-slate-400",children:[n(s.currentAmount)," vs ",n(s.baselineAmount)]})]})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Detected: ",l(s.timestamp)]})]}),c&&e.jsx(p,{anomaly:s})]},s.id)})})]})}export{A as default};
