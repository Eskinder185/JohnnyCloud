@tailwind base;
@tailwind components;
@tailwind utilities;

/* Johnny 5 Assistant Icon Animations */
@keyframes johnny5-pulse {
  0%, 100% {
    opacity: 0.5;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
}

@keyframes johnny5-bounce {
  0%, 100% {
    transform: translateY(0) scale(1);
  }
  25% {
    transform: translateY(-2px) scale(1.05);
  }
  50% {
    transform: translateY(0) scale(1.1);
  }
  75% {
    transform: translateY(-1px) scale(1.05);
  }
}

@keyframes johnny5-glow {
  0%, 100% {
    box-shadow: 0 0 5px rgba(6, 182, 212, 0.3);
  }
  50% {
    box-shadow: 0 0 20px rgba(6, 182, 212, 0.6), 0 0 30px rgba(6, 182, 212, 0.4);
  }
}

.johnny5-listening {
  animation: johnny5-pulse 2s infinite, johnny5-glow 2s infinite;
}

.johnny5-speaking {
  animation: johnny5-bounce 1s infinite;
}

/* Wave animation for emoji */
@keyframes wave {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(14deg); }
  75% { transform: rotate(-8deg); }
}

.animate-wave {
  animation: wave 2.5s ease-in-out infinite;
}

/* Respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .animate-wave,
  .johnny5-listening,
  .johnny5-speaking {
    animation: none;
  }
  
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Typographic Scale - Dark UI */
@layer base {
  /* Desktop (≥1280px) */
  .text-overline {
    @apply text-sm font-semibold leading-[120%];
  }
  
  .text-hero {
    @apply text-[40px] font-bold leading-[115%];
  }
  
  .text-subhead {
    @apply text-lg font-medium leading-[150%] max-w-[640px];
  }
  
  .text-section-title {
    @apply text-[28px] font-bold leading-[120%];
  }
  
  .text-card-title {
    @apply text-xl font-semibold leading-[130%];
  }
  
  .text-body {
    @apply text-base font-normal leading-[160%];
  }
  
  .text-small {
    @apply text-sm font-medium leading-[150%];
  }
  
  .text-button {
    @apply text-sm font-semibold leading-[120%] tracking-[0.02em];
  }
  
  /* Color utility classes */
  .text-primary {
    color: var(--color-primary);
  }
  
  .text-secondary {
    color: var(--color-secondary);
  }
  
  .text-muted {
    color: var(--color-muted);
  }
  
  .text-link {
    color: var(--color-link);
  }
  
  .text-link:hover {
    color: var(--color-link-hover);
  }
  
  /* Tablet (768–1279px) */
  @media (max-width: 1279px) {
    .text-hero {
      @apply text-[36px];
    }
    
    .text-section-title {
      @apply text-2xl;
    }
    
    .text-card-title {
      @apply text-lg;
    }
    
    .text-small {
      @apply text-[13px];
    }
  }
  
  /* Mobile (<768px) */
  @media (max-width: 767px) {
    .text-hero {
      @apply text-[30px];
    }
    
    .text-section-title {
      @apply text-[22px];
    }
    
    .text-card-title {
      @apply text-lg;
    }
    
    .text-body {
      @apply text-[15px];
    }
    
    .text-small {
      @apply text-xs;
    }
  }
}

:root { 
  color-scheme: dark; 
  
  /* Kill old page backgrounds - set transparent base for gradient */
  --bg-0: transparent;       /* Allow gradient to show through */
  --bg-1: transparent;
  --accent-cost: #19c37d;     /* cost = green */
  --accent-security: #38bdf8; /* security = blue/cyan */
  --accent-alert: #f59e0b;    /* amber for minor alerts */
  --accent-critical: #ef4444;  /* red for critical */
  
  /* Dark theme color tokens */
  --color-primary: #E6F1FF;
  --color-secondary: #B5C7DB;
  --color-muted: #8EA0B5;
  --color-link: #7FD1FF;
  --color-link-hover: #A7E3FF;
  --color-bg: transparent;
  --color-surface: rgba(26, 31, 46, 0.3);
  --color-surface2: rgba(37, 43, 61, 0.4);
  --color-border: rgba(255, 255, 255, 0.1);
  --color-border-hover: rgba(255, 255, 255, 0.2);
  
  /* Tile color tokens - Dark theme */
  --tile-metrics-bg: rgba(59, 130, 246, 0.12);
  --tile-metrics-border: rgba(59, 130, 246, 0.2);
  --tile-metrics-glow: rgba(59, 130, 246, 0.5);
  
  --tile-guardrails-bg: rgba(34, 197, 94, 0.12);
  --tile-guardrails-border: rgba(34, 197, 94, 0.2);
  --tile-guardrails-glow: rgba(34, 197, 94, 0.5);
  
  --tile-cost-bg: rgba(168, 85, 247, 0.12);
  --tile-cost-border: rgba(168, 85, 247, 0.2);
  --tile-cost-glow: rgba(168, 85, 247, 0.5);
  
  /* Roadmap color tokens - Dark theme */
  --roadmap-rail: rgba(255, 255, 255, 0.15);
  --roadmap-rail-progress: #22C55E;
  --roadmap-node-completed: #22C55E;
  --roadmap-node-current: #3B82F6;
  --roadmap-node-upcoming: rgba(255, 255, 255, 0.3);
  --roadmap-card: #1E293B;
  --roadmap-card-foreground: #F1F5F9;
  --roadmap-legend-muted: #94A3B8;
}

html, body, #root {
  height: 100%;
}

body {
  margin: 0;
  background: transparent; /* Allow canvas background to show through */
  color: #e5e7eb;
  overflow-x: hidden;
}

/* ensure app content sits above the canvas */
.app-shell {
  position: relative;
  isolation: isolate;
}

/* Content areas with proper contrast over gradient background */
main {
  background: rgba(15, 23, 42, 0.1); /* Much more transparent to show radar background */
  backdrop-filter: blur(12px);
  min-height: 100vh;
}

/* Fix dropdown and select elements */
select, 
select option,
.dropdown,
[role="listbox"],
[role="option"] {
  background: rgba(30, 41, 59, 0.6) !important; /* Much more transparent to show radar background */
  color: #e2e8f0 !important; /* slate-200 */
  border: 1px solid rgba(71, 85, 105, 0.3) !important; /* slate-600 */
  backdrop-filter: blur(12px);
}

select:focus,
select:hover {
  background: rgba(51, 65, 85, 0.7) !important; /* slate-700 */
  border-color: rgba(59, 130, 246, 0.5) !important; /* blue-500 */
}

/* Fix input elements */
input, textarea {
  background: rgba(30, 41, 59, 0.6) !important;
  color: #e2e8f0 !important;
  border: 1px solid rgba(71, 85, 105, 0.3) !important;
  backdrop-filter: blur(12px);
}

input:focus, textarea:focus {
  background: rgba(51, 65, 85, 0.7) !important;
  border-color: rgba(59, 130, 246, 0.5) !important;
}

/* Fix card backgrounds for better contrast - more transparent to show radar background */
.bg-white\/5,
[class*="bg-white/5"] {
  background: rgba(30, 41, 59, 0.3) !important; /* Much more transparent to show radar background */
  backdrop-filter: blur(12px);
  border: 1px solid rgba(71, 85, 105, 0.2) !important;
}

/* Override dark shadows on cards to make them more transparent */
[class*="shadow-[0_0_20px_rgba(0,0,0,0.25)]"] {
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1) !important; /* Much lighter shadow */
}

/* Fix button backgrounds */
button {
  background: rgba(30, 41, 59, 0.6) !important;
  color: #e2e8f0 !important;
  border: 1px solid rgba(71, 85, 105, 0.3) !important;
  backdrop-filter: blur(12px);
}

button:hover {
  background: rgba(51, 65, 85, 0.7) !important;
  border-color: rgba(59, 130, 246, 0.5) !important;
}

/* accessibility: respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .global-bg--animated { 
    animation: none !important;
    /* Keep canvas visible but stop animations */
  }
  body { background: transparent; }
}

/* Image overlay utilities for better text contrast */
@layer utilities {
  .text-shadow-sm {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
  }
  
  .text-shadow-md {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.55);
  }
  
  .text-shadow-lg {
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.55);
  }
  
  .text-stroke {
    -webkit-text-stroke: 1px rgba(0, 0, 0, 0.5);
  }
  
  .backdrop-blur-subtle {
    backdrop-filter: blur(2px);
  }
  
  .backdrop-blur-medium {
    backdrop-filter: blur(4px);
  }
}

/* Light theme */
.light {
  color-scheme: light;
  /* Light theme color tokens */
  --color-primary: #1A202C;
  --color-secondary: #4A5568;
  --color-muted: #718096;
  --color-link: #3182CE;
  --color-link-hover: #2C5282;
  --color-bg: #FFFFFF;
  --color-surface: #F7FAFC;
  --color-surface2: #EDF2F7;
  --color-border: rgba(0, 0, 0, 0.1);
  --color-border-hover: rgba(0, 0, 0, 0.2);
  
  /* Tile color tokens - Light theme */
  --tile-metrics-bg: rgba(59, 130, 246, 0.08);
  --tile-metrics-border: rgba(59, 130, 246, 0.16);
  --tile-metrics-glow: rgba(59, 130, 246, 0.4);
  
  --tile-guardrails-bg: rgba(34, 197, 94, 0.08);
  --tile-guardrails-border: rgba(34, 197, 94, 0.16);
  --tile-guardrails-glow: rgba(34, 197, 94, 0.4);
  
  --tile-cost-bg: rgba(168, 85, 247, 0.08);
  --tile-cost-border: rgba(168, 85, 247, 0.16);
  --tile-cost-glow: rgba(168, 85, 247, 0.4);
  
  /* Roadmap color tokens - Light theme */
  --roadmap-rail: rgba(0, 0, 0, 0.15);
  --roadmap-rail-progress: #22C55E;
  --roadmap-node-completed: #22C55E;
  --roadmap-node-current: #3B82F6;
  --roadmap-node-upcoming: rgba(0, 0, 0, 0.3);
  --roadmap-card: #FFFFFF;
  --roadmap-card-foreground: #1E293B;
  --roadmap-legend-muted: #64748B;
  
  /* Background System tokens - Light theme */
  --bg-overlay-opacity: 0.05;
  --bg-overlay-brightness: 1.1;
  --bg-overlay-contrast: 0.9;
  --bg-vignette-strength: 0.2;
}

html, body, #root { height: 100%; }
body { 
  background-color: transparent; /* Allow canvas background to show through */
  color: var(--color-primary);
  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Pause animations when tab is not visible or user prefers reduced motion */
.animations-paused *,
.animations-paused *::before,
.animations-paused *::after {
  animation-play-state: paused !important;
}

/* Theme-aware utility classes */
.text-primary { color: var(--color-primary); }
.text-secondary { color: var(--color-secondary); }
.text-muted { color: var(--color-muted); }
.text-link { color: var(--color-link); }
.text-link-hover:hover { color: var(--color-link-hover); }

.bg-primary { background-color: var(--color-bg); }
.bg-surface { background-color: var(--color-surface); }
.bg-surface2 { background-color: var(--color-surface2); }

.border-primary { border-color: var(--color-border); }
.border-primary-hover:hover { border-color: var(--color-border-hover); }

/* Line clamp utility for text truncation */
.line-clamp-1 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
}

/* Tile color utilities */
.tile-metrics {
  --tile-bg: var(--tile-metrics-bg);
  --tile-border: var(--tile-metrics-border);
  --tile-glow: var(--tile-metrics-glow);
  --tile-accent: #3B82F6;
}

.tile-guardrails {
  --tile-bg: var(--tile-guardrails-bg);
  --tile-border: var(--tile-guardrails-border);
  --tile-glow: var(--tile-guardrails-glow);
  --tile-accent: #22C55E;
}

.tile-cost {
  --tile-bg: var(--tile-cost-bg);
  --tile-border: var(--tile-cost-border);
  --tile-glow: var(--tile-cost-glow);
  --tile-accent: #A855F7;
}

/* Motion reduction utility */
.motion-reduce\:transform-none {
  transform: none !important;
}

/* Touch-friendly interactions */
@media (hover: none) and (pointer: coarse) {
  .tile-metrics:hover,
  .tile-guardrails:hover,
  .tile-cost:hover {
    transform: none !important;
  }
}

/* Roadmap utility classes */
.roadmap-rail { background-color: var(--roadmap-rail); }
.roadmap-rail-progress { background-color: var(--roadmap-rail-progress); }
.roadmap-node-completed { background-color: var(--roadmap-node-completed); }
.roadmap-node-current { background-color: var(--roadmap-node-current); }
.roadmap-node-upcoming { border-color: var(--roadmap-node-upcoming); }
.roadmap-card { 
  background-color: var(--roadmap-card);
  color: var(--roadmap-card-foreground);
}
.roadmap-legend-muted { color: var(--roadmap-legend-muted); }

/* Legacy background styles removed - using static dark background */

/* Utility for ring glow on focus */
.focus-glow:focus-visible { outline: none; box-shadow: 0 0 0 3px rgba(0,230,255,.35); }

/* Legacy animated background styles removed */

/* Legacy keyframes and jc-bg styles removed */

/* glowing divider line util */
.jc-glow-line {
  height: 1px;
  background: linear-gradient(90deg, rgba(0,255,255,0) 0%, rgba(0,255,255,.25) 30%, rgba(255,0,255,.25) 70%, rgba(255,0,255,0) 100%);
  filter: blur(0.25px);
}

/* Roadmap Timeline Keyframes */
@keyframes roadmap-glow {
  0% {
    box-shadow: 0 0 5px rgba(0, 255, 255, 0.3);
  }
  100% {
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.8), 0 0 30px rgba(0, 255, 255, 0.4);
  }
}

@keyframes roadmap-flow {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes roadmap-bounce-in {
  0% {
    opacity: 0;
    transform: scale(0.3) translateY(-20px);
  }
  50% {
    opacity: 1;
    transform: scale(1.1) translateY(0);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* JohnnyCloud utility classes */
@layer utilities {
  .jc-card {
    @apply bg-jc-surface/30 border border-white/10 rounded-xl shadow-card hover:shadow-cardHover transition-all duration-300;
  }
  
  .jc-card-hover {
    @apply hover:border-jc-cyan/30 hover:shadow-glow;
  }
  
  .jc-heading {
    @apply bg-gradient-to-r from-jc-cyan via-jc-pink to-jc-green bg-clip-text text-transparent;
  }
  
  .jc-title-gradient {
    @apply bg-gradient-to-r from-jc-light-blue to-jc-light-purple bg-clip-text text-transparent;
  }

  /* Custom slider styling */
  .slider::-webkit-slider-thumb {
    appearance: none;
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #06b6d4;
    cursor: pointer;
    border: 2px solid #ffffff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  .slider::-moz-range-thumb {
    height: 20px;
    width: 20px;
    border-radius: 50%;
    background: #06b6d4;
    cursor: pointer;
    border: 2px solid #ffffff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }
  
  /* Roadmap Timeline Animations */
  .roadmap-dot-glow {
    animation: roadmap-glow 2s ease-in-out infinite alternate;
  }
  
  .roadmap-line-flow {
    background: linear-gradient(90deg, 
      rgba(0,255,255,0) 0%, 
      rgba(0,255,255,0.5) 25%, 
      rgba(0,255,255,1) 50%, 
      rgba(0,255,255,0.5) 75%, 
      rgba(0,255,255,0) 100%);
    background-size: 200% 100%;
    animation: roadmap-flow 3s ease-in-out infinite;
  }
  
  .roadmap-card-hover {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .roadmap-card-hover:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 20px 40px rgba(0, 255, 255, 0.1);
  }
  
  .jc-chip {
    @apply px-3 py-1 bg-white/5 border border-white/10 rounded-full text-sm hover:bg-white/10 transition-colors;
  }
  
  .jc-btn {
    @apply px-4 py-2 bg-jc-cyan text-jc-bg rounded-lg font-medium hover:bg-jc-cyan/80 transition-colors;
  }
  
  .jc-btn-outline {
    @apply px-4 py-2 border border-jc-cyan text-jc-cyan rounded-lg font-medium hover:bg-jc-cyan/10 transition-colors;
  }
  
  .jc-dot {
    @apply w-2 h-2 rounded-full;
  }

  /* Typography utilities */
  .text-primary {
    @apply text-text-primary;
  }
  
  .text-secondary {
    @apply text-text-secondary;
  }
  
  .text-muted {
    @apply text-text-muted;
  }
  
  .text-inverse {
    @apply text-text-inverse;
  }
  
  .link {
    @apply text-link hover:text-link-hover underline-offset-4 hover:underline focus:underline;
  }
  
  .text-success {
    @apply text-severity-success;
  }
  
  .text-warning {
    @apply text-severity-warning;
  }
  
  .text-danger {
    @apply text-severity-danger;
  }
  
  .text-info {
    @apply text-severity-info;
  }
}

/* --- Typewriter caret --- */
@keyframes caret-blink {
  0%, 40% { opacity: 1 }
  50%, 90% { opacity: 0 }
  100% { opacity: 1 }
}

/* --- Soft glow pulse for titles --- */
@keyframes glow-pulse {
  0%,100% { text-shadow: 0 0 0 rgba(167,139,250,0.0), 0 0 0 rgba(56,189,248,0.0) }
  50%     { text-shadow: 0 0 12px rgba(167,139,250,0.55), 0 0 22px rgba(56,189,248,0.35) }
}

/* Tiny helpers */
.text-glow        { animation: glow-pulse 3.2s ease-in-out infinite }
.caret            { display:inline-block; width:1ch; border-right:1px solid rgba(255,255,255,.7); animation: caret-blink 1s steps(1,end) infinite }
.reveal           { opacity:0; transform: translateY(6px); transition: opacity .7s ease, transform .7s ease }
.reveal.show      { opacity:1; transform: translateY(0) }

/* ===== Core motions (subtle, fast) ===== */
@keyframes fade-up   { from {opacity:0; transform:translateY(8px)} to {opacity:1; transform:translateY(0)} }
@keyframes fade-left { from {opacity:0; transform:translateX(12px)} to {opacity:1; transform:translateX(0)} }
@keyframes fade-right{ from {opacity:0; transform:translateX(-12px)} to {opacity:1; transform:translateX(0)} }
@keyframes pop-in    { from {opacity:0; transform:scale(.96)} to {opacity:1; transform:scale(1)} }
@keyframes float-slow{ 0%,100% {transform:translateY(0)} 50% {transform:translateY(-6px)} }

.reveal        { opacity:0; transform:translateY(8px) }
.reveal.in     { animation: fade-up .6s ease forwards }
.reveal-left   { opacity:0; transform:translateX(12px) }
.reveal-left.in{ animation: fade-left .6s ease forwards }
.reveal-right  { opacity:0; transform:translateX(-12px) }
.reveal-right.in{animation: fade-right .6s ease forwards }

.pop-in        { animation: pop-in .4s ease both }
.float-slow    { animation: float-slow 8s ease-in-out infinite }

/* Hover micro-interactions */
.card-lift     { transition: transform .25s ease, box-shadow .25s ease }
.card-lift:hover { transform: translateY(-4px); box-shadow: 0 6px 24px rgba(0,0,0,.25) }

/* Keep colors consistent with your app (white + opacities) */
.text-title    { color: #fff }          /* same as your headings */
.text-body     { color: rgba(255,255,255,.72) } /* same as other paragraphs */
.text-faint    { color: rgba(255,255,255,.56) } /* small meta text */

/* Custom slider styles for savings calculator */
.slider::-webkit-slider-thumb {
  appearance: none;
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: #06b6d4;
  cursor: pointer;
  border: 2px solid #fff;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.slider::-moz-range-thumb {
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: #06b6d4;
  cursor: pointer;
  border: 2px solid #fff;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
